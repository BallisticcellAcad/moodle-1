!function t(e,i,o){function n(s,l){if(!i[s]){if(!e[s]){var d="function"==typeof require&&require;if(!l&&d)return d(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return n(i?i:t)},c,c.exports,t,e,i,o)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,e,i){"use strict";function o(){var t=this,e=void 0,i=void 0,d=void 0,a=void 0;e="Copyright 2015-2017 Glen Reesor",d="<div id='"+o.DIALOG_ID+"' class='popup' style='height: "+(s.Sizer.popupHeight+"px'>")+"<p style='text-align: center; font-weight: bold;'>"+(n.App.MY_NAME+"</p>")+"<p style='text-align: center;'>Version: "+(r.m3App.getVersionAsString()+"</p>")+("<p style='text-align: center;'>"+e+"</p>")+"<p style='font-weight: bold;'>Source Code</p><ul><li><a href='http://github.com/glenreesor/m3' target='_blank'>github.com/glenreesor/m3</a></li></ul><p style='font-weight: bold;'>Libraries</p><ul><li>localForage (Mozilla)</li></ul><p style='font-weight: bold;'>Icons</p><ul><li>User b.gaultier at openclipart.org</li><li>User warszawianka at openclipart.org</li><li>User netalloy at openclipart.org</li></ul><p style='font-weight: bold;'License</p><p style='font-size: 8pt'>Mobile Mind Mapper is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License, version 3, as published by the Free Software Foundation.</p><p style='font-size: 8pt'>Mobile Mind Mapper is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p style='font-size: 8pt'>You should have received a copy of the GNU General Public License along with Mobile Mind Mapper.  If not, see <a target='_blank' href=http://www.gnu.org/licenses/>http://www.gnu.org/licenses/</a>.</p>"+("<button id='"+o.OK_ID+"'>Ok</button>")+"</div>",i=new DOMParser,a=i.parseFromString(d,"text/html"),this._aboutDialog=document.importNode(a.getElementById(o.DIALOG_ID),!0),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").appendChild(this._aboutDialog),document.getElementById(o.OK_ID).addEventListener("click",function(){return t.close()}),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),r.m3App.getGlobalState().setState(l.State.STATE_DIALOG_ABOUT)}Object.defineProperty(i,"__esModule",{value:!0}),i.AboutDialog=o;var n=t("./App"),r=t("./main"),s=t("./Sizer"),l=t("./State");o.DIALOG_ID=n.App.HTML_ID_PREFIX+"-aboutDialog",o.OK_ID=o.DIALOG_ID+"Ok",o.prototype.close=function(){var t=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._aboutDialog),r.m3App.getGlobalState().setState(l.State.STATE_IDLE)}},{"./App":2,"./Sizer":32,"./State":33,"./main":36}],2:[function(t,e,i){"use strict";function o(){this._diagnostics=new s.Diagnostics,this._globalState=new a.State}Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.App=o;var r=t("./Controller"),s=t("./Diagnostics"),l=t("./ErrorDialog"),d=t("./Sizer"),a=t("./State");o.DB_NAME="m3 - Mobile Mind Mapper",o.HTML_ID_PREFIX="m3-mobile-mind-mapper",o.KEY_LAST_VERSION_RUN="lastVersionRun",o.KEY_MAPLIST="mapList",o.KEY_INVOCATION_COUNT="invocationCount",o.m3Path=null,o.myDB=null,o.MY_NAME="m3 - Mobile Mind Mapper",o.MY_VERSION={major:0,minor:11,patch:0,isReleaseCandidate:!1,releaseCandidateNum:1},o.setM3Path=function(){var t=void 0,e=void 0,i=void 0;t=document.currentScript.src,i=t.lastIndexOf("/"),e=i===-1?".":t.substring(0,i),o.m3Path=e},o.prototype.getController=function(){return this._controller},o.prototype.getDiagnostics=function(){return this._diagnostics},o.prototype.getGlobalState=function(){return this._globalState},o.prototype.getHeight=function(){return this._embeddingOptions.height},o.prototype.getInitialMapName=function(){return this._embeddingOptions.initialMapName},o.prototype.getInitialMapUrl=function(){return this._embeddingOptions.initialMapUrl},o.prototype._getLocalForageDriver=function(){var t=void 0;return t=localforage.createInstance({name:"storagetest"}),new Promise(function(e,i){t.setDriver(localforage.INDEXEDDB),t.getItem("test").then(function(t){e(localforage.INDEXEDDB)}).catch(function(i){t.setDriver(localforage.WEBSQL),t.getItem("test").then(function(t){e(localforage.WEBSQL)}).catch(function(t){e(localforage.LOCALSTORAGE)})})})},o.prototype.getMapModel=function(){return this._myMapModel},o.prototype.getVersionAsString=function(){var t=void 0;return t=o.MY_VERSION.major+"."+(o.MY_VERSION.minor+".")+(""+o.MY_VERSION.patch),o.MY_VERSION.isReleaseCandidate&&(t+=" - Release Candidate "+o.MY_VERSION.releaseCandidateNum),t},o.prototype.getWidth=function(){return this._embeddingOptions.width},o.prototype.isFullPage=function(){return this._embeddingOptions.fullPage},o.prototype.isReadOnly=function(){return this._embeddingOptions.readOnly},o.prototype._isValidOrigin=function(){var t=/^([a-zA-Z]+:\/\/)([^\/]+)/,e=o.m3Path,i=void 0,n=void 0,r=window.top.location.href,s=void 0;return s=!1,e.match(/^file:/)?s=!0:e.match(/^[a-zA-Z]+:/)?(i=t.exec(e),n=t.exec(r),i&&i[2]&&n&&n[2]&&i[2]===n[2]&&(s=!0)):s=!0,s},o.prototype.showButtons=function(){return this._embeddingOptions.showButtons},o.prototype.showMapName=function(){return this._embeddingOptions.showMapName},o.prototype.run=function(){return this._isValidOrigin()?(this._setEmbeddingOptions(),this._sizer=new d.Sizer,this.warnOnNavigateAway()&&(document.title=o.MY_NAME+" "+this.getVersionAsString(),window.addEventListener("beforeunload",function(t){return t.returnValue="Are you sure you want to exit?",t})),this._controller=new r.Controller,void this._startup()):void alert("Please host m3 files on your own server. Full information can be found at http://glenreesor.ca/mobile-mind-mapper")},o.prototype._setEmbeddingOptions=function(){var t="m3MobileMindMapper",e={apiVersion:{type:"string",default:"0.12"},warnOnNavigateAway:{type:"boolean",default:!0},fullPage:{type:"boolean",default:!0},height:{type:"string",default:"100%"},initialMapName:{type:"string",default:null},initialMapUrl:{type:"string",default:null},readOnly:{type:"boolean",default:!1},showButtons:{type:"boolean",default:!0},showMapName:{type:"boolean",default:!0},width:{type:"string",default:"100%"}},i=void 0,o=void 0;if(o=window.parent[t]){console.log("Validating window."+t+"...");for(i in e)if(void 0!==o[i]&&n(o[i])!==e[i].type)throw i+" must be of type "+e[i].type;if("0.12"!==o.apiVersion)throw"apiVersion must be 0.12";if(void 0!==o.height&&!o.height.match(/[0-9]+(%|px)/))throw"height must be a valid CSS length string";if(void 0!==o.width&&!o.width.match(/[0-9]+(%|px)/))throw"width must be a valid CSS length string";console.log("window.m3MobileMindMapper is valid."),this._embeddingOptions={};for(i in e)this._embeddingOptions[i]=void 0!==o[i]?o[i]:e[i].default}else{this._embeddingOptions={};for(i in e)this._embeddingOptions[i]=e[i].default}},o.prototype.setMapModel=function(t){var e=void 0,i=void 0,o=void 0;if(null!==this._myMapModel){o=this._myMapModel.getRootNode(),e=o.getChildren(),i=e.length;for(var n=0;n<i;n++)o.deleteChild(e[0]);o.getView().deleteMyself()}this._myMapModel=t},o.prototype.warnOnNavigateAway=function(){return this._embeddingOptions.warnOnNavigateAway},o.prototype._upgradeFrom0_0_0_To_0_7_0=function(){var t="Map list should be empty",e="map-"+Date.now(),i="m3-map1",n="Map 1",r=void 0;localforage.getItem(i).then(function(t){return r=null!==t?o.myDB.setItem(e,[t]):Promise.resolve(null)}).then(function(e){return r=null!==e?localforage.removeItem(i):Promise.resolve(t)}).then(function(i){var r=[];return i!==t&&r.push({key:e,name:n}),o.myDB.setItem(o.KEY_MAPLIST,r)}).catch(function(t){new l.ErrorDialog("Error upgrading DB from previous version: "+t)})},o.prototype._sendStatsToServer=function(t,e){var i=void 0,o=void 0;null===t&&(t="0"),i=new XMLHttpRequest,i&&(o=window.location.href.replace(/index\.html/,""),o+="statLogger.php?oldVersion="+t+("&currentVersion="+this.getVersionAsString())+("&invocationCount="+e)+("&userAgent="+window.navigator.userAgent),i.onreadystatechange=function(){i.readyState},i.open("POST",o),i.send())},o.prototype._startup=function(){var t=this,e=void 0,i=void 0,n=void 0;!o.MY_VERSION.isReleaseCandidate&&window.location.href.match(/\/m3-rc\/$/)&&alert("m3 version "+this.getVersionAsString()+" has been released. Please switch to the regular non-release candidate location: http://glenreesor.ca/m3"),this._getLocalForageDriver().then(function(r){var s=void 0;r===localforage.LOCALSTORAGE&&alert("Warning: Your browser does not support the longterm reliable storage used by m3, therefore you shouldn't rely on longterm storage of maps created in m3."),s={name:o.DB_NAME,driver:r},o.myDB=localforage.createInstance(s),e="updating invocation count",o.myDB.getItem(o.KEY_INVOCATION_COUNT).then(function(t){return null===t&&(t=0),n=t+1,o.myDB.setItem(o.KEY_INVOCATION_COUNT,n)}).then(function(){e="retrieving last version run",o.myDB.getItem(o.KEY_LAST_VERSION_RUN).then(function(n){return i=n,null===n&&t._upgradeFrom0_0_0_To_0_7_0(),e="setting last version run",o.myDB.setItem(o.KEY_LAST_VERSION_RUN,t.getVersionAsString())}).then(function(){if(i!==t.getVersionAsString()){var e=window.location.href;"http://glenreesor.ca/"!==e.substr(0,21)&&"http://127.0.0.1/"!==e.substr(0,17)||(null!==i&&alert("Congratulations! Your m3 has been updated to "+("version "+t.getVersionAsString()+".")),t._sendStatsToServer(i,n))}})}).catch(function(t){new l.ErrorDialog("Error "+e+": "+t)})})}},{"./Controller":9,"./Diagnostics":10,"./ErrorDialog":12,"./Sizer":32,"./State":33}],3:[function(t,e,i){"use strict";function o(t){var e=this,i=void 0,o=void 0,n=void 0,s=void 0,l=void 0,a=void 0,c=void 0;a=d.m3App.showButtons()?"":"display: none;",c=d.m3App.showButtons()&&!d.m3App.isReadOnly()?"":"display: none",this._controller=t,l=r.App.m3Path+"/images",i="<div id='buttonsHtmlBottom' style='text-align: right; "+(a+"'>")+"<img id='about'          style='margin-right: 10px' "+("class='clickableIcon' src='"+l+"/info.svg' ")+"height='32px'></img><img id='importExport'   style='margin-right: 10px' "+("class='clickableIcon' src='"+l+"/import-export.svg' ")+"height='32px'></img><img id='manage'         style='margin-right: 10px' "+("class='clickableIcon' src='"+l+"/manage.svg' ")+"height='32px'></img><img id='save'           style='margin-right: 10px' "+("class='clickableIcon' src='"+l+"/save.svg' ")+"height='32px'></img><img id='load'           style='margin-right: 10px' "+("class='clickableIcon' src='"+l+"/load.svg' ")+"height='32px'></img></div>",o="<div id='buttonsHtmlRight' style='text-align: right;"+c+"'><img id='delete-node'    style='margin-bottom: 10px' "+("class='clickableIcon' src='"+l+"/delete.svg' ")+"width='32px'><br><img id='cloud'          style='margin-bottom: 10px' "+("class='clickableIcon' src='"+l+"/cloud.svg' ")+"width='32px'><br><img id='add-child'      style='margin-bottom: 10px' "+("class='clickableIcon' src='"+l+"/add-child.svg' ")+"width='32px'><br><img id='add-sibling'    style='margin-bottom: 10px' "+("class='clickableIcon' src='"+l+"/add-sibling.svg' ")+"width='32px'><br><img id='edit-node'      style='margin-bottom: 10px' "+("class='clickableIcon' src='"+l+"/edit.svg' ")+"width='32px'></div>",n=new DOMParser,s=n.parseFromString(i,"text/html"),this._buttonsDivBottom=document.importNode(s.getElementById("buttonsHtmlBottom"),!0),document.getElementById(r.App.HTML_ID_PREFIX+"-app").appendChild(this._buttonsDivBottom),s=n.parseFromString(o,"text/html"),this._buttonsDivRight=document.importNode(s.getElementById("buttonsHtmlRight"),!0),document.getElementById(r.App.HTML_ID_PREFIX+"-right").appendChild(this._buttonsDivRight),document.getElementById("about").addEventListener("touchstart",function(){}),document.getElementById("importExport").addEventListener("touchstart",function(){}),document.getElementById("manage").addEventListener("touchstart",function(){}),document.getElementById("load").addEventListener("touchstart",function(){}),document.getElementById("save").addEventListener("touchstart",function(){}),document.getElementById("delete-node").addEventListener("touchstart",function(){}),document.getElementById("cloud").addEventListener("touchstart",function(){}),document.getElementById("add-child").addEventListener("touchstart",function(){}),document.getElementById("add-sibling").addEventListener("touchstart",function(){}),document.getElementById("edit-node").addEventListener("touchstart",function(){}),document.getElementById("about").addEventListener("click",function(){return e.about()}),document.getElementById("importExport").addEventListener("click",function(){return e.importExport()}),document.getElementById("manage").addEventListener("click",function(){return e.manage()}),document.getElementById("load").addEventListener("click",function(){return e.load()}),document.getElementById("save").addEventListener("click",function(){return t.getMapModel().save()})}Object.defineProperty(i,"__esModule",{value:!0}),i.AppButtons=o;var n=t("./AboutDialog"),r=t("./App"),s=t("./ImportExportDialog"),l=t("./LoadDialog"),d=t("./main"),a=t("./ManageSavedMapsDialog"),c=(t("./Sizer"),t("./State"));o.prototype.about=function(){var t=void 0;d.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&(t=new n.AboutDialog)},o.prototype.importExport=function(){var t=void 0;d.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&(t=new s.ImportExportDialog)},o.prototype.manage=function(){var t=void 0;d.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&(t=new a.ManageSavedMapsDialog)},o.prototype.load=function(){var t=void 0;d.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&(t=new l.LoadDialog(this._controller))},o.prototype.remove=function(){document.getElementById(r.App.HTML_ID_PREFIX+"-app").removeChild(this._buttonsDivBottom),document.getElementById(r.App.HTML_ID_PREFIX+"-app").removeChild(this._buttonsDivRight)}},{"./AboutDialog":1,"./App":2,"./ImportExportDialog":19,"./LoadDialog":22,"./ManageSavedMapsDialog":23,"./Sizer":32,"./State":33,"./main":36}],4:[function(t,e,i){"use strict";function o(){this._destinationId=null,this._color="#000000",this._endArrow=null,this._endInclination=null,this._id=null,this._startArrow=null,this._startInclination=null,this._unexpectedAttributes=new Map,this._unexpectedTags=[],this._destinationNode=null}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.ArrowLink=o;var r=t("./Diagnostics"),s=t("./xmlHelpers"),l=t("./main"),d=new Map([["COLOR","#000000"],["DESTINATION",""],["ENDARROW",""],["ENDINCLINATION",""],["ID",""],["STARTARROW",""],["STARTINCLINATION",""]]),a=[];o.prototype.connectToNodeModel=function(t){this._destinationNode=t.getNodeModelById(t.getRoot(),this._destinationId)},o.prototype.getAsXml=function(){var t=new Map,e=[];return t.set("DESTINATION",this._destinationId),t.set("COLOR",this._color),t.set("ENDARROW",this._endArrow),t.set("ENDINCLINATION",this._endInclination),t.set("ID",this._id),t.set("STARTARROW",this._startArrow),t.set("STARTINCLINATION",this._startInclination),e=(0,s.createXml)("arrowlink",d,t,this._unexpectedAttributes,[],this._unexpectedTags)},o.prototype.getColor=function(){return this._color},o.prototype.getDestinationId=function(){return this._destinationId},o.prototype.getDestinationNode=function(){return this._destinationNode},o.prototype.getEndArrow=function(){return this._endArrow},o.prototype.getEndInclination=function(){return this._endInclination},o.prototype.getId=function(){return this._id},o.prototype.getStartArrow=function(){return this._startArrow},o.prototype.getStartInclination=function(){return this._startInclination},o.prototype.loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,c=void 0,p=(0,s.loadXml)(t,d,a),h=n(p,4);e=h[0],o=h[1],i=h[2],c=h[3],this.setColor(e.get("COLOR")),this.setDestinationId(e.get("DESTINATION")),this.setEndArrow(e.get("ENDARROW")),this.setEndInclination(e.get("ENDINCLINATION")),this.setId(e.get("ID")),this.setStartArrow(e.get("STARTARROW")),this.setStartInclination(e.get("STARTINCLINATION")),this._unexpectedAttributes=o,this._unexpectedTags=c,l.m3App.getDiagnostics().log(r.Diagnostics.TASK_IMPORT_XML,"Created arrowlink.")},o.prototype.setColor=function(t){this._color=t},o.prototype.setDestinationId=function(t){this._destinationId=t},o.prototype.setEndArrow=function(t){this._endArrow=t},o.prototype.setEndInclination=function(t){this._endInclination=t},o.prototype.setId=function(t){this._id=t},o.prototype.setStartArrow=function(t){this._startArrow=t},o.prototype.setStartInclination=function(t){this._startInclination=t}},{"./Diagnostics":10,"./main":36,"./xmlHelpers":38}],5:[function(t,e,i){"use strict";function o(t,e,i,o){var r="http://www.w3.org/2000/svg";this._mostRecentCloudColor=null,this._myNodeModel=e,this._myNodeView=t,this._isSelected=!1,this._height=0,this._width=0,this._svgBubble=document.createElementNS(r,"rect"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgBubbleLayer").appendChild(this._svgBubble),this._svgBubble.setAttribute("rx",5),this._svgBubble.setAttribute("ry",5),this._boundClickListener=this._clickListener.bind(this),this._svgBubble.addEventListener("click",this._boundClickListener),this.update(i,o)}Object.defineProperty(i,"__esModule",{value:!0}),i.BubbleView=o;var n=t("./App"),r=t("./main");o.BUBBLE_INNER_PADDING=5,o.prototype._clickListener=function(){r.m3App.getController().getMapViewController().nodeClicked(this._myNodeView)},o.prototype.deleteSvg=function(){this._svgBubble.removeEventListener("click",this._boundClickListener),document.getElementById(n.App.HTML_ID_PREFIX+"-svgBubbleLayer").removeChild(this._svgBubble)},o.prototype.getHeight=function(){return this._height},o.prototype.getWidth=function(){return this._width},o.prototype.setMostRecentCloudColor=function(t){var e=void 0;e=this._myNodeModel.getBackgroundColor(),""===e&&(e=null===t?"#ffffff":t),this._svgBubble.setAttribute("fill",e)},o.prototype.setPosition=function(t,e){this._svgBubble.setAttribute("x",t),this._svgBubble.setAttribute("y",e-this.getHeight()/2)},o.prototype.setSelected=function(t){this._isSelected=t,t===!0?(this._svgBubble.setAttribute("stroke","#0000ff"),this._svgBubble.setAttribute("stroke-width",3)):(this._svgBubble.setAttribute("stroke","#000000"),this._svgBubble.setAttribute("stroke-width",1))},o.prototype.setVisible=function(t){t?this._svgBubble.setAttribute("visibility","visible"):this._svgBubble.setAttribute("visibility","hidden")},o.prototype.update=function(t,e){this.setSelected(this._isSelected),this._width=t+2*o.BUBBLE_INNER_PADDING,this._height=e+2*o.BUBBLE_INNER_PADDING,this._svgBubble.setAttribute("height",this._height),this._svgBubble.setAttribute("width",this._width)}},{"./App":2,"./main":36}],6:[function(t,e,i){"use strict";function o(){this._color="#cccccc",this._unexpectedAttributes=new Map,this._unexpectedTags=[]}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.CloudModel=o;var r=t("./Diagnostics"),s=t("./xmlHelpers"),l=t("./main"),d=new Map([["COLOR","#cccccc"]]),a=[];o.prototype.getAsXml=function(){var t=new Map,e=[];return t.set("COLOR",this._color),e=(0,s.createXml)("cloud",d,t,this._unexpectedAttributes,[],this._unexpectedTags)},o.prototype.getColor=function(){return this._color},o.prototype.loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,c=void 0,p=(0,s.loadXml)(t,d,a),h=n(p,4);e=h[0],o=h[1],i=h[2],c=h[3],this.setColor(e.get("COLOR")),this._unexpectedAttributes=o,this._unexpectedTags=c,l.m3App.getDiagnostics().log(r.Diagnostics.TASK_IMPORT_XML,"Created cloudModel.")},o.prototype.setColor=function(t){this._color=t}},{"./Diagnostics":10,"./main":36,"./xmlHelpers":38}],7:[function(t,e,i){"use strict";function o(t){var e="http://www.w3.org/2000/svg";this._svgCloud=document.createElementNS(e,"path"),this._svgCloud.setAttribute("stroke",t.getColor()),this._svgCloud.setAttribute("fill",t.getColor()),this._svgCloud.setAttribute("fill-opacity","1"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgCloudLayer").appendChild(this._svgCloud)}Object.defineProperty(i,"__esModule",{value:!0}),i.CloudView=o;var n=t("./App");o.PADDING_HORIZONTAL=5,o.PADDING_VERTICAL=5,o.prototype.deleteSvg=function(){document.getElementById(n.App.HTML_ID_PREFIX+"-svgCloudLayer").removeChild(this._svgCloud)},o.prototype.getHeight=function(){return this._height},o.prototype.getWidth=function(){return this._width},o.prototype.setAreaToEnclose=function(t,e){this._height=e+2*o.PADDING_VERTICAL,this._width=t+2*o.PADDING_HORIZONTAL},o.prototype.setPosition=function(t,e){var i=void 0,n=void 0,r=void 0;i=t-o.PADDING_HORIZONTAL,n=e+this._height/2,r="M "+i+" "+n+" "+("v-"+this._height+" h "+this._width+" v "+this._height+" ")+("h -"+this._width),this._svgCloud.setAttribute("d",r)},o.prototype.setVisible=function(t){t?this._svgCloud.setAttribute("visibility","visible"):this._svgCloud.setAttribute("visibility","hidden")}},{"./App":2}],8:[function(t,e,i){"use strict";function o(t){var e="http://www.w3.org/2000/svg";this._svgConnector=document.createElementNS(e,"path"),this._svgConnector.setAttribute("stroke","#000000"),this._svgConnector.setAttribute("fill-opacity","0"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgBubbleLayer").appendChild(this._svgConnector)}Object.defineProperty(i,"__esModule",{value:!0}),i.ConnectorView=o;var n=t("./App");o.WIDTH=30,o.prototype.deleteSvg=function(){document.getElementById(n.App.HTML_ID_PREFIX+"-svgBubbleLayer").removeChild(this._svgConnector)},o.prototype.getWidth=function(){return o.WIDTH},o.prototype.setPosition=function(t,e,i,o){var n=void 0,r=void 0,s=void 0;e===o?r="M "+t+" "+e+" L "+i+" "+o:(t<i?(n=1,s=-1):(n=-1,s=1),r="M "+t+" "+e+" C "+(t+20*n)+" "+e+" "+("  "+(i+20*s)+" "+o+" "+i+" "+o)),this._svgConnector.setAttribute("d",r)},o.prototype.setVisible=function(t){t?this._svgConnector.setAttribute("visibility","visible"):this._svgConnector.setAttribute("visibility","hidden")}},{"./App":2}],9:[function(t,e,i){"use strict";function o(){this._appButtons=new r.AppButtons(this),this._loadInitialMap(),this._mapViewController=new c.MapViewController(this),d.m3App.showMapName()||(document.getElementById(n.App.HTML_ID_PREFIX+"-top").style.display="none"),this._rootNodeView=this._mapModel.getRoot().getView(),this.selectRootNode(),this.redrawMain(),this._mapViewController.centerSelectedNode()}Object.defineProperty(i,"__esModule",{value:!0}),i.Controller=o;var n=t("./App"),r=t("./AppButtons"),s=t("./EditNodeDialog"),l=t("./ErrorDialog"),d=t("./main"),a=t("./MapModel"),c=t("./MapViewController");t("./NodeView");o.prototype.addChild=function(t){var e=void 0,i=void 0;e=t.addChild(["New Node"]),t.getView().update(),this.redrawMain(),i=new s.EditNodeDialog(this,e,null)},o.prototype.addChildAfter=function(t,e){var i=void 0,o=void 0;i=t.addChildAfter(e,["New Node"]),this.redrawMain(),o=new s.EditNodeDialog(this,i,null)},o.prototype.changeNodeText=function(t,e){t.setText(e),t.getView().update(),this.redrawMain()},o.prototype.deleteNode=function(t){var e=void 0;e=t.getParent(),e.deleteChild(t),this._deleteView(t),e.getView().update(),this.redrawMain()},o.prototype._deleteView=function(t){var e=this;t.getChildren().forEach(function(t){e._deleteView(t)}),t.getView().deleteMyself()},o.prototype.getMapModel=function(){return this._mapModel},o.prototype.getMapViewController=function(){return this._mapViewController},o.prototype._loadInitialMap=function(){var t=void 0,e=void 0,i=void 0;this._mapModel=new a.MapModel(this,a.MapModel.TYPE_EMPTY,null,"New Map",null),i=d.m3App.getInitialMapUrl(),null!==i&&(e=new XMLHttpRequest,e&&(e.onreadystatechange=function(){4===e.readyState&&(200!==e.status?t=new l.ErrorDialog("Error Loading map "+i+": "+(e.status+" "+e.statusText)):this.newMap(a.MapModel.TYPE_XML,null,d.m3App.getInitialMapName(),[e.response]))}.bind(this),e.open("get",i),e.send()))},o.prototype.moveNodeDown=function(t){var e=void 0;e=t.getParent(),null!==e&&(e.moveChildDown(t),this.redrawMain())},o.prototype.moveNodeUp=function(t){var e=void 0;e=t.getParent(),null!==e&&(e.moveChildUp(t),this.redrawMain())},o.prototype.newMap=function(t,e,i,o){this._deleteView(this._mapModel.getRoot()),this._mapModel=new a.MapModel(this,t,e,i,o),this._rootNodeView=this._mapModel.getRoot().getView(),this._mapViewController.reset(),this.redrawMain(),this._mapViewController.centerSelectedNode()},o.prototype.selectRootNode=function(){this._mapViewController.nodeClicked(this._rootNodeView)},o.prototype.setMapName=function(t){document.getElementById(n.App.HTML_ID_PREFIX+"-mapName").innerHTML=t},o.prototype.setModifiedIndicator=function(t){t?document.getElementById(n.App.HTML_ID_PREFIX+"-modified").removeAttribute("hidden"):document.getElementById(n.App.HTML_ID_PREFIX+"-modified").setAttribute("hidden","true")},o.prototype.toggleCloud=function(t){t.toggleCloud(),t.getView().update(),this.redrawMain()},o.prototype.toggleFoldedStatus=function(t){t.toggleFoldedStatus(),t.getView().update(),this.redrawMain()},o.prototype.redrawGraphicalLinks=function(t){var e=this;t.getView().drawGraphicalLinks(),t.getChildren().forEach(function(t){e.redrawGraphicalLinks(t)})},o.prototype.redrawMain=function(){this._rootNodeView.calcDimensions(),this._rootNodeView.drawAt(0,0,null,null),this.redrawGraphicalLinks(this._mapModel.getRoot())}},{"./App":2,"./AppButtons":3,"./EditNodeDialog":11,"./ErrorDialog":12,"./MapModel":24,"./MapViewController":25,"./NodeView":27,"./main":36}],10:[function(t,e,i){"use strict";function o(){this._LOG_TYPE={TASK_IMPORT_XML:"none",TASK_VIEWS:"none",TASK_VIEW_STATE:"none"},this._WARN_TYPE={TASK_IMPORT_XML:"console",TASK_VIEWS:"none",TASK_VIEW_STATE:"none"},this._ERR_TYPE={TASK_IMPORT_XML:"alert",TASK_VIEWS:"alert",TASK_VIEW_STATE:"alert"},this._popupWindow=null}Object.defineProperty(i,"__esModule",{value:!0}),i.Diagnostics=o,o.TASK_IMPORT_XML="TASK_IMPORT_XML",o.TASK_VIEWS="TASK_VIEWS",o.TASK_VIEW_STATE="TASK_VIEW_STATE",o.prototype.err=function(t,e){var i=t+": "+e;"console"===this._ERR_TYPE[t]?console.err(i):"alert"===this._ERR_TYPE[t]?alert("ERR : "+i):"popup"===this._ERR_TYPE[t]&&this._popupMsg("ERR : "+i)},o.prototype.log=function(t,e){var i=t+": "+e;"console"===this._LOG_TYPE[t]?console.log(i):"alert"===this._LOG_TYPE[t]?alert("Log : "+i):"popup"===this._LOG_TYPE[t]&&this._popupMsg("Log : "+i)},o.prototype.warn=function(t,e){var i=t+": "+e;"console"===this._WARN_TYPE[t]?console.warn(i):"alert"===this._WARN_TYPE[t]?alert("Warn: "+i):"popup"===this._WARN_TYPE[t]&&this._popupMsg("Warn: "+i)},o.prototype._popupMsg=function(t){var e=void 0,i=void 0,o=void 0;null===this._popupWindow&&(this._popupWindow=window.open("","Diagnostics")),e=this._popupWindow.document,i=e.getElementsByTagName("body")[0],o=e.createElement("code"),o.appendChild(e.createTextNode(t)),i.appendChild(o),i.appendChild(e.createElement("br"))}},{}],11:[function(t,e,i){"use strict";function o(t,e,i){var d=this;this._controller=t,this._nodeToEdit=e;var c=void 0,p=void 0,h=void 0,u=void 0,I=void 0,_=void 0;for(c=Math.min(80,.8*(s.Sizer.svgWidth/s.Sizer.characterWidth)),_=Math.min(a,e.getText().length),h="<div id='"+o.DIALOG_ID+"' class='popup' "+("style='height: "+s.Sizer.popupHeight+"px'> <p> Edit Node </p>")+("<textarea id='"+o.TEXT_ENTRY_FIELD_ID+"' ")+("rows='"+_+"' cols='"+c+"'>"),e.getText().forEach(function(t,e){0!==e&&(h+="\n"),h+=t}),h+="</textarea> <br><br>"+("<button id='"+o.SAVE_ID+"'>Save</button>")+("<button id='"+o.CANCEL_ID+"'>Cancel</button>")+("<button id='"+o.LINE_BREAK+"'>Line Break</button>")+"</div>",p=new DOMParser,u=p.parseFromString(h,"text/html"),this._editNodeDialog=document.importNode(u.getElementById(o.DIALOG_ID),!0),document.getElementById(r.App.HTML_ID_PREFIX+"-popups").appendChild(this._editNodeDialog),this._textEntryField=document.getElementById(o.TEXT_ENTRY_FIELD_ID),document.getElementById(o.SAVE_ID).addEventListener("click",function(){return d.save()}),document.getElementById(o.CANCEL_ID).addEventListener("click",function(){return d.close()}),document.getElementById(o.LINE_BREAK).addEventListener("click",function(){return d.lineBreakClicked()}),this._textEntryField.addEventListener("keypress",function(t){switch(t.key){case"Escape":d.close(),t.stopPropagation();break;case"Enter":t.ctrlKey?d.lineBreakClicked():d.save(),t.stopPropagation()}d.adjustHeight()}),document.getElementById(r.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),n.m3App.getGlobalState().setState(l.State.STATE_DIALOG_EDIT_NODE),this._textEntryField.focus(),null===i?this._textEntryField.select():this._textEntryField.value=i,I=0;I<a;I++)this.adjustHeight()}Object.defineProperty(i,"__esModule",{value:!0}),i.EditNodeDialog=o;var n=t("./main"),r=t("./App"),s=t("./Sizer"),l=t("./State"),d=80,a=5;o.DIALOG_ID=r.App.HTML_ID_PREFIX+"-editNodeDialog",o.CANCEL_ID=o.DIALOG_ID+"Cancel",o.LINE_BREAK=o.DIALOG_ID+"LineBreak",o.SAVE_ID=o.DIALOG_ID+"Save",o.TEXT_ENTRY_FIELD_ID=o.DIALOG_ID+"TextEntry",o.prototype.adjustHeight=function(){var t=this._textEntryField;t.scrollHeight>t.clientHeight&&t.clientHeight<=d&&t.rows++},o.prototype.close=function(){var t=void 0;t=document.getElementById(r.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._editNodeDialog),n.m3App.getGlobalState().setState(l.State.STATE_IDLE),this._controller.getMapViewController().setSelectedNodeView(this._nodeToEdit.getView())},o.prototype.lineBreakClicked=function(){var t=void 0,e=void 0;t=this._textEntryField.value,e=this._textEntryField.selectionEnd,this._textEntryField.value=t.substring(0,e)+"\n"+t.substring(e),this._textEntryField.focus(),this._textEntryField.selectionEnd=e+1,this.adjustHeight()},o.prototype.save=function(){this._controller.changeNodeText(this._nodeToEdit,this._textEntryField.value.split("\n")),this.close()}},{"./App":2,"./Sizer":32,"./State":33,"./main":36}],12:[function(t,e,i){"use strict";function o(t){var e=this,i=void 0,d=void 0,a=void 0;d="<div id='"+o.DIALOG_ID+"' class='popup' style='height: "+(s.Sizer.popupHeight+"px'>")+"<p style='text-align: center; font-weight: bold;'>"+(n.App.MY_NAME+" - Error</p>")+"<p>"+t+"</p>"+("<button id='"+o.OK_ID+"'>Ok</button>")+"</div>",i=new DOMParser,a=i.parseFromString(d,"text/html"),this._errorDialog=document.importNode(a.getElementById(o.DIALOG_ID),!0),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").appendChild(this._errorDialog),document.getElementById(o.OK_ID).addEventListener("click",function(){return e.close()}),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),r.m3App.getGlobalState().setState(l.State.STATE_DIALOG_ERROR)}Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorDialog=o;var n=t("./App"),r=t("./main"),s=t("./Sizer"),l=t("./State");o.DIALOG_ID=n.App.HTML_ID_PREFIX+"-errorDialog",o.OK_ID=o.DIALOG_ID+"Ok",o.prototype.close=function(){
var t=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._errorDialog),r.m3App.getGlobalState().setState(l.State.STATE_IDLE)}},{"./App":2,"./Sizer":32,"./State":33,"./main":36}],13:[function(t,e,i){"use strict";function o(){var t=this,e=void 0,i=void 0,d=void 0,a=void 0,c=void 0,p=void 0,h=void 0,u=void 0,I=void 0;I=n.m3App.getController().getMapModel(),d=new Date(Date.now()),c="m3-"+I.getMapName()+"-"+d.getFullYear()+"-"+this._padNumber(d.getMonth()+1)+"-"+this._padNumber(d.getDate())+"::"+this._padNumber(d.getHours())+":"+this._padNumber(d.getMinutes())+":"+this._padNumber(d.getSeconds()),u=I.getAsXml(),e=new Blob(u,{type:"text/xml"}),i=URL.createObjectURL(e),p="<div id='"+o.DIALOG_ID+"' class='popup' style='height:"+(s.Sizer.popupHeight+"px'>")+"<p>Copy text below, or scroll to bottom for download link.</p>"+("<textarea id='"+o.TEXT_AREA_ID+"' rows=20 cols=30>"),u.forEach(function(t){t=t.replace(new RegExp("&","g"),"&amp;"),p+=t+"\n"}),p+="   </textarea><br><br>"+("<p>Download: <a href='"+i+"' download='"+c+"' ")+"target='blank'>"+(c+"</a><br>")+("<button id='"+o.OK_ID+"'>Close</button>")+"</div>",a=new DOMParser,h=a.parseFromString(p,"text/html"),this._exportDialog=document.importNode(h.getElementById(o.DIALOG_ID),!0),document.getElementById(r.App.HTML_ID_PREFIX+"-popups").appendChild(this._exportDialog),document.getElementById(o.OK_ID).addEventListener("click",function(){return t.close()}),document.getElementById(r.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),n.m3App.getGlobalState().setState(l.State.STATE_EXPORT_POPUP)}Object.defineProperty(i,"__esModule",{value:!0}),i.ExportDialog=o;var n=t("./main"),r=t("./App"),s=t("./Sizer"),l=t("./State");o.DIALOG_ID=r.App.HTML_ID_PREFIX+"-importExportDialog",o.OK_ID=o.DIALOG_ID+"Ok",o.TEXT_AREA_ID=o.DIALOG_ID+"TextArea",o.prototype.close=function(){var t=void 0;t=document.getElementById(r.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._exportDialog),n.m3App.getGlobalState().setState(l.State.STATE_IDLE)},o.prototype._padNumber=function(t){var e=void 0;return e="",t<10&&(e="0"),e+t}},{"./App":2,"./Sizer":32,"./State":33,"./main":36}],14:[function(t,e,i){"use strict";function o(t,e){var i="http://www.w3.org/2000/svg";this._myNodeModel=e,this._myNodeView=t,this._svgFoldingIcon=document.createElementNS(i,"circle"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgBubbleLayer").appendChild(this._svgFoldingIcon),this._svgFoldingIcon.setAttribute("r",o.FOLDING_ICON_RADIUS),this._svgFoldingIcon.setAttribute("stroke","#000000"),this._boundClickListener=this._clickListener.bind(this),this._svgFoldingIcon.addEventListener("click",this._boundClickListener),this.update()}Object.defineProperty(i,"__esModule",{value:!0}),i.FoldingIconView=o;var n=t("./App"),r=t("./main");o.FOLDING_ICON_RADIUS=10,o.prototype._clickListener=function(){r.m3App.getController().toggleFoldedStatus(this._myNodeView.getModel())},o.prototype.deleteSvg=function(){this._svgFoldingIcon.removeEventListener("click",this._boundClickListener),document.getElementById(n.App.HTML_ID_PREFIX+"-svgBubbleLayer").removeChild(this._svgFoldingIcon)},o.prototype.getHeight=function(){return 2*o.FOLDING_ICON_RADIUS},o.prototype.getWidth=function(){return 2*o.FOLDING_ICON_RADIUS},o.prototype.setPosition=function(t,e){this._svgFoldingIcon.setAttribute("cx",t+o.FOLDING_ICON_RADIUS),this._svgFoldingIcon.setAttribute("cy",e)},o.prototype.setVisible=function(t){t?this._svgFoldingIcon.setAttribute("visibility","visible"):this._svgFoldingIcon.setAttribute("visibility","hidden")},o.prototype.update=function(){this._myNodeModel.isFolded()?this._svgFoldingIcon.setAttribute("fill-opacity","1"):this._svgFoldingIcon.setAttribute("fill-opacity","0")}},{"./App":2,"./main":36}],15:[function(t,e,i){"use strict";function o(){this._bold=!1,this._italic=!1,this._size="12",this._unexpectedAttributes=new Map,this._unexpectedTags=[]}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.Font=o;var r=t("./Diagnostics"),s=t("./xmlHelpers"),l=t("./main"),d=new Map([["BOLD","false"],["ITALIC","size"],["SIZE","12"]]),a=[];o.prototype.getAsXml=function(){var t=new Map,e=[];return this._bold===!0?t.set("BOLD","true"):t.set("BOLD","false"),this._italic===!0?t.set("ITALIC","true"):t.set("ITALIC","false"),t.set("SIZE",this._size),e=(0,s.createXml)("font",d,t,this._unexpectedAttributes,[],this._unexpectedTags)},o.prototype.getSize=function(){return this._size},o.prototype.isBold=function(){return this._bold},o.prototype.isItalic=function(){return this._italic},o.prototype.loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,c=void 0,p=(0,s.loadXml)(t,d,a),h=n(p,4);e=h[0],o=h[1],i=h[2],c=h[3],"true"===e.get("BOLD")?this._bold=!0:this._bold=!1,"true"===e.get("ITALIC")?this._italic=!0:this._italic=!1,this._size=e.get("SIZE"),this._unexpectedAttributes=o,this._unexpectedTags=c,l.m3App.getDiagnostics().log(r.Diagnostics.TASK_IMPORT_XML,"Created font.")},o.prototype.setBold=function(t){this._bold=t},o.prototype.setItalic=function(t){this._italic=t},o.prototype.setSize=function(t){this._size=t}},{"./Diagnostics":10,"./main":36,"./xmlHelpers":38}],16:[function(t,e,i){"use strict";function o(t,e){var i="http://www.w3.org/2000/svg";this._arrowLink=e,this._myNodeView=t,this._svgGraphicalLink=document.createElementNS(i,"path"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgLinksLayer").appendChild(this._svgGraphicalLink),this._svgGraphicalLink.setAttribute("stroke",this._arrowLink.getColor()),this._svgGraphicalLink.setAttribute("marker-end","url(#"+n.App.HTML_ID_PREFIX+"-triangle)"),this._svgGraphicalLink.setAttribute("fill-opacity","0")}Object.defineProperty(i,"__esModule",{value:!0}),i.GraphicalLinkView=o;var n=t("./App"),r=(t("./main"),t("./NodeModel"));o.ARROW_WIDTH=12,o.prototype.deleteSvg=function(){document.getElementById(n.App.HTML_ID_PREFIX+"-svgLinksLayer").removeChild(this._svgGraphicalLink)},o.prototype.draw=function(){var t=void 0,e=void 0,i=void 0,o=void 0,n=void 0,s=void 0,l=void 0,d=void 0,a=void 0;for(o=!1,this._svgGraphicalLink.removeAttribute("stroke-dasharray"),d=this._myNodeView;d.isVisible()!==!0;)o=!0,n=d.getModel().getParent(),d=n.getView();for(e=this._arrowLink.getDestinationNode().getView();e.isVisible()!==!0;)o=!0,n=e.getModel().getParent(),e=n.getView();d!==e?(o&&this._svgGraphicalLink.setAttribute("stroke-dasharray","5, 5"),l=d.getGraphicalLinkCoords(),t=e.getGraphicalLinkCoords(),a=d.getModel().getSide()===r.NodeModel.POSITION_LEFT?-1:1,i=e.getModel().getSide()===r.NodeModel.POSITION_LEFT?-1:1,s="M "+l.x+" "+l.y+" "+("C "+(l.x+200*a)+" "+l.y+" ")+("  "+(t.x+200*i)+" "+t.y+" ")+("  "+t.x+" "+t.y),this._svgGraphicalLink.setAttribute("d",s),this.setVisible(!0)):this.setVisible(!1)},o.prototype.setVisible=function(t){t?this._svgGraphicalLink.setAttribute("visibility","visible"):this._svgGraphicalLink.setAttribute("visibility","hidden")}},{"./App":2,"./NodeModel":26,"./main":36}],17:[function(t,e,i){"use strict";function o(){this._builtin="m3",this._unexpectedAttributes=new Map,this._unexpectedTags=[]}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.IconModel=o;var r=t("./Diagnostics"),s=t("./xmlHelpers"),l=t("./main"),d=new Map([["BUILTIN","m3"]]),a=[];o.prototype.getAsXml=function(){var t=new Map,e=void 0,i=[];return t.set("BUILTIN",this._builtin),e=[],i=(0,s.createXml)("icon",d,t,this._unexpectedAttributes,e,this._unexpectedTags)},o.prototype.getName=function(){return this._builtin},o.prototype.loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,c=void 0,p=(0,s.loadXml)(t,d,a),h=n(p,4);e=h[0],o=h[1],i=h[2],c=h[3],this._builtin=e.get("BUILTIN"),this._unexpectedAttributes=o,this._unexpectedTags=c,l.m3App.getDiagnostics().log(r.Diagnostics.TASK_IMPORT_XML,"Created IconModel.")},o.prototype.setName=function(t){this._builtin=t}},{"./Diagnostics":10,"./main":36,"./xmlHelpers":38}],18:[function(t,e,i){"use strict";function o(t,e){var i="http://www.w3.org/2000/svg";this._iconModel=e,this._myNodeView=t,this._imagesPath=n.App.m3Path+"/images",this._svgImage=document.createElementNS(i,"image"),this._svgImage.setAttribute("width",l),this._svgImage.setAttribute("height",s),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").appendChild(this._svgImage),this._boundClickListener=this._clickListener.bind(this),this._svgImage.addEventListener("click",this._boundClickListener),this.update()}Object.defineProperty(i,"__esModule",{value:!0}),i.IconView=o;var n=t("./App"),r=t("./main"),s=20,l=20;o.prototype._clickListener=function(){r.m3App.getController().getMapViewController().nodeClicked(this._myNodeView)},o.prototype.deleteSvg=function(){this._svgImage.removeEventListener("click",this._boundClickListener),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").removeChild(this._svgImage)},o.prototype.getHeight=function(){return s},o.prototype.getWidth=function(){return l},o.prototype.setPosition=function(t,e){this._svgImage.setAttribute("x",t),this._svgImage.setAttribute("y",e-.5*s)},o.prototype.setVisible=function(t){t?this._svgImage.setAttribute("visibility","visible"):this._svgImage.setAttribute("visibility","hidden")},o.prototype.update=function(){var t="http://www.w3.org/1999/xlink",e=void 0;this.setVisible(!0),e=this._iconModel.getName().replace("%","percent"),this._svgImage.setAttributeNS(t,"href",this._imagesPath+"/icons/"+e+".svg")}},{"./App":2,"./main":36}],19:[function(t,e,i){"use strict";function o(){var t=this,e=void 0,i=void 0,n=void 0;i="<div id='"+o.DIALOG_ID+"' class='popup' "+("style='height: "+d.Sizer.popupHeight+"px'>")+"<p>Import from .mm file:"+("<input id='"+o.FILE_INPUT_ID+"' type='file'")+"</p><br><p>Export to .mm file:"+("<button id='"+o.EXPORT_ID+"'>")+"Export</button></p><br>"+("<button id='"+o.CANCEL_ID+"'>Cancel</button>")+"</div>",e=new DOMParser,n=e.parseFromString(i,"text/html"),this._importExportDialog=document.importNode(n.getElementById(o.DIALOG_ID),!0),document.getElementById(s.App.HTML_ID_PREFIX+"-popups").appendChild(this._importExportDialog),document.getElementById(o.CANCEL_ID).addEventListener("click",function(){return t.close()}),document.getElementById(o.EXPORT_ID).addEventListener("click",function(){return t.exportMap()}),document.getElementById(o.FILE_INPUT_ID).addEventListener("change",function(e){return t.fileInput(e)}),document.getElementById(s.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),r.m3App.getGlobalState().setState(a.State.STATE_DIALOG_IMPORT_EXPORT)}Object.defineProperty(i,"__esModule",{value:!0}),i.ImportExportDialog=o;var n=t("./ExportDialog"),r=t("./main"),s=t("./App"),l=t("./MapModel"),d=t("./Sizer"),a=t("./State");o.DIALOG_ID=s.App.HTML_ID_PREFIX+"-importExportDialog",o.CANCEL_ID=o.DIALOG_ID+"Cancel",o.EXPORT_ID=o.DIALOG_ID+"Export",o.FILE_INPUT_ID=o.DIALOG_ID+"FileInput",o.prototype.close=function(){var t=void 0;t=document.getElementById(s.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._importExportDialog),r.m3App.getGlobalState().setState(a.State.STATE_IDLE)},o.prototype.exportMap=function(){this.close();new n.ExportDialog},o.prototype.fileInput=function(t){var e=this,i=void 0;i=new FileReader,i.onloadend=function(){r.m3App.getController().newMap(l.MapModel.TYPE_XML,null,"Imported Map",[i.result]),e.close()},i.readAsText(t.target.files[0])}},{"./App":2,"./ExportDialog":13,"./MapModel":24,"./Sizer":32,"./State":33,"./main":36}],20:[function(t,e,i){"use strict";function o(t,e){var i="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xlink";this._linkLocation="",this._myNodeModel=e,this._myNodeView=t,this._imagesPath=n.App.m3Path+"/images",this._svgImage=document.createElementNS(i,"image"),this._svgImage.setAttributeNS(o,"href",this._imagesPath+"/link.svg"),this._svgImage.setAttribute("width",s),this._svgImage.setAttribute("height",r),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").appendChild(this._svgImage),this._boundClickListener=this._clickListener.bind(this),this._svgImage.addEventListener("click",this._boundClickListener),this.update()}Object.defineProperty(i,"__esModule",{value:!0}),i.LinkIconView=o;var n=t("./App"),r=(t("./main"),25),s=25;o.prototype._clickListener=function(){window.open(this._linkLocation)},o.prototype.deleteSvg=function(){this._svgImage.removeEventListener("click",this._boundClickListener),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").removeChild(this._svgImage)},o.prototype.getHeight=function(){return r},o.prototype.getWidth=function(){return s},o.prototype.setPosition=function(t,e){this._svgImage.setAttribute("x",t),this._svgImage.setAttribute("y",e-.5*r)},o.prototype.setVisible=function(t){t?this._svgImage.setAttribute("visibility","visible"):this._svgImage.setAttribute("visibility","hidden")},o.prototype.update=function(){this._linkLocation=this._myNodeModel.getLink(),this.setVisible(!0)}},{"./App":2,"./main":36}],21:[function(t,e,i){"use strict";function o(){this._color=null,this._destination=null,this._endArrow=null,this._endInclination=null,this._id=null,this._source=null,this._startArrow=null,this._startInclination=null,this._unexpectedAttributes=new Map,this._unexpectedTags=[]}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.LinkTarget=o;var r=t("./Diagnostics"),s=t("./xmlHelpers"),l=t("./main"),d=new Map([["COLOR","#000000"],["DESTINATION",""],["ENDARROW",""],["ENDINCLINATION",""],["ID",""],["SOURCE",""],["STARTARROW",""],["STARTINCLINATION",""]]),a=[];o.prototype.getAsXml=function(){var t=new Map,e=[];return t.set("COLOR",this._color),t.set("DESTINATION",this._destination),t.set("ENDARROW",this._endArrow),t.set("ENDINCLINATION",this._endInclination),t.set("ID",this._id),t.set("SOURCE",this._source),t.set("STARTARROW",this._startArrow),t.set("STARTINCLINATION",this._startInclination),e=(0,s.createXml)("linktarget",d,t,this._unexpectedAttributes,[],this._unexpectedTags)},o.prototype.getColor=function(){return this._color},o.prototype.getDestination=function(){return this._destination},o.prototype.getEndArrow=function(){return this._endArrow},o.prototype.getEndInclination=function(){return this._endInclination},o.prototype.getId=function(){return this._id},o.prototype.getSource=function(){return this._source},o.prototype.getStartArrow=function(){return this._startArrow},o.prototype.getStartInclination=function(){return this._startInclination},o.prototype.loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,c=void 0,p=(0,s.loadXml)(t,d,a),h=n(p,4);e=h[0],o=h[1],i=h[2],c=h[3],this.setColor(e.get("COLOR")),this.setDestination(e.get("DESTINATION")),this.setEndArrow(e.get("ENDARROW")),this.setEndInclination(e.get("ENDINCLINATION")),this.setId(e.get("ID")),this.setSource(e.get("SOURCE")),this.setStartArrow(e.get("STARTARROW")),this.setStartInclination(e.get("STARTINCLINATION")),this._unexpectedAttributes=o,this._unexpectedTags=c,l.m3App.getDiagnostics().log(r.Diagnostics.TASK_IMPORT_XML,"Created linktarget.")},o.prototype.setColor=function(t){this._color=t},o.prototype.setDestination=function(t){this._destination=t},o.prototype.setEndArrow=function(t){this._endArrow=t},o.prototype.setEndInclination=function(t){this._endInclination=t},o.prototype.setId=function(t){this._id=t},o.prototype.setSource=function(t){this._source=t},o.prototype.setStartArrow=function(t){this._startArrow=t},o.prototype.setStartInclination=function(t){this._startInclination=t}},{"./Diagnostics":10,"./main":36,"./xmlHelpers":38}],22:[function(t,e,i){"use strict";function o(t){var e=this,i=void 0,l=void 0,d=void 0;this._controller=t,l="<div id='"+o.DIALOG_ID+"' class='popup' style='height: "+(c.Sizer.popupHeight+"px'>")+"<p style='text-align: center; font-weight: bold;'>Load Map</p>",this._controller.getMapModel().getModifiedStatus()&&(l+="<p> Warning: Current map has unsaved changes.</p>"),n.App.myDB.getItem(n.App.KEY_MAPLIST).then(function(t){t.forEach(function(t){l+="<p id="+a.RenameMapDialog.MAP_LIST_PREFIX+t.key+" "+("class='clickableText'>"+t.name+"</p>")}),l+="<hr>"+("<p id='"+o.SAMPLE_ID+"' class='clickableText'>")+"m3 Sample</p>"+("<p id='"+o.NEW_MAP_ID+"' ")+"class='clickableText'>New Map</p>",l+="   <button id='"+o.CANCEL_ID+"'>Cancel</button></div>",i=new DOMParser,d=i.parseFromString(l,"text/html"),e._loadDialog=document.importNode(d.getElementById(o.DIALOG_ID),!0),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").appendChild(e._loadDialog),t.forEach(function(t){document.getElementById(a.RenameMapDialog.MAP_LIST_PREFIX+t.key).addEventListener("click",function(){return e.loadMap(t.key,t.name)})}),document.getElementById(o.SAMPLE_ID).addEventListener("click",function(){return e.loadMap(o.SAMPLE_ID,"m3 Sample")}),document.getElementById(o.NEW_MAP_ID).addEventListener("click",function(){return e.loadMap(o.NEW_MAP_ID,"")}),document.getElementById(o.CANCEL_ID).addEventListener("click",function(){return e.close()}),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),s.m3App.getGlobalState().setState(p.State.STATE_DIALOG_LOAD)}).catch(function(t){new r.ErrorDialog("Unable to load list of saved maps: "+t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.LoadDialog=o;var n=t("./App"),r=t("./ErrorDialog"),s=t("./main"),l=t("./m3SampleXml"),d=t("./MapModel"),a=t("./RenameMapDialog"),c=t("./Sizer"),p=t("./State");o.DIALOG_ID=n.App.HTML_ID_PREFIX+"-loadDialog",o.CANCEL_ID=o.DIALOG_ID+"Cancel",o.NEW_MAP_ID=o.DIALOG_ID+"NewMap",o.SAMPLE_ID=o.DIALOG_ID+"Sample",o.prototype.close=function(){var t=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._loadDialog),s.m3App.getGlobalState().setState(p.State.STATE_IDLE)},o.prototype.loadMap=function(t,e){var i=this;t===o.NEW_MAP_ID?(this._controller.newMap(d.MapModel.TYPE_EMPTY,null,"New Map",null),this.close(),this._controller.selectRootNode()):t===o.SAMPLE_ID?(this._controller.newMap(d.MapModel.TYPE_XML,null,"m3 Sample",l.m3SampleXml),this.close(),this._controller.selectRootNode()):n.App.myDB.getItem(t).then(function(o){i._controller.newMap(d.MapModel.TYPE_XML,t,e,o),i.close(),i._controller.selectRootNode()}).catch(function(o){i.close();new r.ErrorDialog("Error loading map '"+e+"'"+("using key '"+t+"'': ")+(o+" "+o.stack))})}},{"./App":2,"./ErrorDialog":12,"./MapModel":24,"./RenameMapDialog":28,"./Sizer":32,"./State":33,"./m3SampleXml":35,"./main":36}],23:[function(t,e,i){"use strict";function o(){var t=this,e=void 0,i=void 0,l=void 0;i="<div id='"+o.DIALOG_ID+"' class='popup' "+("style='height: "+d.Sizer.popupHeight+"px'>")+"<p style='text-align: center; font-weight: bold;'>Saved Maps</p>",n.App.myDB.getItem(n.App.KEY_MAPLIST).then(function(r){r.forEach(function(t){i+="<span>"+t.name+"</span><button id='"+o.RENAME_ID_PREFIX+(t.key+"'>Rename</button>")+("<button id='"+o.DELETE_ID_PREFIX)+(t.key+"'>Delete</button><br><br>")}),i+="<button id='"+o.CANCEL_ID+"'>Cancel</button></div>",e=new DOMParser,l=e.parseFromString(i,"text/html"),t._manageSavedMapsDialog=document.importNode(l.getElementById(o.DIALOG_ID),!0),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").appendChild(t._manageSavedMapsDialog),r.forEach(function(e,i){document.getElementById(""+o.RENAME_ID_PREFIX+e.key).addEventListener("click",function(){return t.renameMap(r,i)}),document.getElementById(""+o.DELETE_ID_PREFIX+e.key).addEventListener("click",function(){return t.deleteMap(r,i)})}),document.getElementById(o.CANCEL_ID).addEventListener("click",function(){return t.close()}),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),s.m3App.getGlobalState().setState(a.State.STATE_DIALOG_MANAGE_SAVED_MAPS)}).catch(function(t){new r.ErrorDialog("Unable to load list of saved maps: "+t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.ManageSavedMapsDialog=o;var n=t("./App"),r=t("./ErrorDialog"),s=t("./main"),l=t("./RenameMapDialog"),d=t("./Sizer"),a=t("./State");o.DIALOG_ID=n.App.HTML_ID_PREFIX+"-manageSavedMapsDialog",o.CANCEL_ID=o.DIALOG_ID+"Cancel",o.DELETE_ID_PREFIX=o.DIALOG_ID+"D",o.RENAME_ID_PREFIX=o.DIALOG_ID+"R",o.prototype.close=function(){var t=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._manageSavedMapsDialog),s.m3App.getGlobalState().setState(a.State.STATE_IDLE)},o.prototype.deleteMap=function(t,e){var i=this,o=void 0;t[e].key===s.m3App.getController().getMapModel().getDbKey()?(this.close(),o=new r.ErrorDialog("Error: Cannot delete map being edited")):n.App.myDB.removeItem(t[e].key).then(function(){return t.splice(e,1),n.App.myDB.setItem(n.App.KEY_MAPLIST,t)}).then(function(){i.close()}).catch(function(i){o=new r.ErrorDialog("Error trying to delete map "+('"'+t[e].name+'" with key ')+(t[e].key+": "+i))})},o.prototype.renameMap=function(t,e){var i=void 0;this.close(),i=new l.RenameMapDialog(t,e)}},{"./App":2,"./ErrorDialog":12,"./RenameMapDialog":28,"./Sizer":32,"./State":33,"./main":36}],24:[function(t,e,i){"use strict";function o(t,e,i,n,r){this._controller=t,this._mapName=n,this._modifiedStatus=!1,this._version=o._DEFAULT_VERSION,this.setMapName(n),this._unexpectedAttributes=new Map,this._unexpectedTags=[],e===o.TYPE_EMPTY?(this._dbKey=null,this._rootNode=new c.NodeModel(this._controller,this,c.NodeModel.TYPE_NEW,null,["New Map"],null),this.setModifiedStatus(!0)):(this._dbKey=i,this._loadFromXml(r),this.setModifiedStatus(!1))}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.MapModel=o;var r=t("./App"),s=t("./Diagnostics"),l=t("./ErrorDialog"),d=t("./xmlHelpers"),a=t("./main"),c=t("./NodeModel"),p=t("./SaveDialog"),h=new Map([["version",""]]),u=["node"];o._DEFAULT_VERSION="1.0.1",o.TYPE_EMPTY="empty",o.TYPE_XML="xml",o.prototype._connectArrowLinks=function(t){var e=this;t.connectArrowLinks(),t.getChildren().forEach(function(t){e._connectArrowLinks(t)})},o.prototype.getAsXml=function(){var t=new Map,e=void 0,i=[];return t.set("version",this._version),e=[],e.push(this._rootNode),i=(0,d.createXml)("map",h,t,this._unexpectedAttributes,e,this._unexpectedTags)},o.prototype.getDbKey=function(){return this._dbKey},o.prototype.getMapName=function(){return this._mapName},o.prototype.getModifiedStatus=function(){return this.modifiedStatus},o.prototype.getNodeModelById=function(t,e){var i=void 0,o=void 0,n=null;if(t.getId()===e)n=t;else for(o=0;o<t.getChildren().length&&null===n;o++)i=t.getChildren()[o],n=this.getNodeModelById(i,e);return n},o.prototype.getRoot=function(){return this._rootNode},o.prototype.getVersion=function(){return this._version},o.prototype._loadFromXml=function(t){var e=void 0,i=void 0,o=void 0,n=void 0;if(n=new DOMParser,o="",t.forEach(function(t){o+=t+"\n"}),null!==o)try{e=n.parseFromString(o,"text/xml")}catch(t){a.m3App.getDiagnostics().err(s.Diagnostics.TASK_IMPORT_XML,"Error parsing XML."),a.m3App.getDiagnostics().err(s.Diagnostics.TASK_IMPORT_XML,t.message)}return i=e.documentElement,"map"!==i.nodeName.toLowerCase()?void a.m3App.getDiagnostics().err(s.Diagnostics.TASK_IMPORT_XML,"This doesn't look like a mind map file. Doesn't start with <map>"):(this._version=i.getAttribute("version")||i.getAttribute("VERSION"),"1.0.1"===this._version?this._loadFromXml1_0_1(i):(a.m3App.getDiagnostics().warn(s.Diagnostics.TASK_IMPORT_XML,"I'm not familiar with version '"+this._version+"'. I'll pretend it's version '1.0.1'."),this._loadFromXml1_0_1(i)),void this._connectArrowLinks(this._rootNode))},o.prototype._loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,r=void 0,l=void 0,p=void 0,I=void 0,_=void 0,g=void 0;a.m3App.getDiagnostics().log(s.Diagnostics.TASK_IMPORT_XML,"Loading a version '"+this._version+"' file.");var D=(0,d.loadXml)(t,h,u),E=n(D,4);for(o=E[0],_=E[1],r=E[2],g=E[3],this._unexpectedAttributes=_,p=r.length,e=0;e<p;e++)i=r[e],I=i.tagName,"node"===I&&(a.m3App.getDiagnostics().log(s.Diagnostics.TASK_IMPORT_XML,"Loading <"+I+"?"),l=new c.NodeModel(this._controller,this,c.NodeModel.TYPE_XML,null,"",i),this._rootNode=l);this._unexpectedTags=g},o.prototype.save=function(){var t=this,e=void 0;null===this._dbKey?e=new p.SaveDialog:r.App.myDB.setItem(this._dbKey,this.getAsXml()).then(function(){t.setModifiedStatus(!1)}).catch(function(e){new l.ErrorDialog("Error saving map "+(t._mapName+"' using key ")+("'"+t._dbKey+"': "+e))})},o.prototype.setDbKey=function(t){this._dbKey=t},o.prototype.setMapName=function(t){this._mapName=t,this._controller.setMapName(t)},o.prototype.setModifiedStatus=function(t){this.modifiedStatus=t,this._controller.setModifiedIndicator(t)}},{"./App":2,"./Diagnostics":10,"./ErrorDialog":12,"./NodeModel":26,"./SaveDialog":31,"./main":36,"./xmlHelpers":38}],25:[function(t,e,i){"use strict";function o(t){var e=this;this._controller=t,this._state={oldState:p,oldSelectedNodeView:null,state:p,selectedNodeView:null,scroll:{currentTranslationX:0,currentTranslationY:0,lastScreenX:0,lastScreenY:0},velocityCalc:{lastScreenX:0,lastScreenY:0,previousTime:0,vx:0,vy:0}},this._svgGElement=document.getElementById(n.App.HTML_ID_PREFIX+"-svg-g-element"),l.m3App.getDiagnostics().log(r.Diagnostics.TASK_VIEWS,"Creating MapView."),this._svgGElement.setAttribute("transform","translate(0,0)"),document.getElementById("add-child").addEventListener("click",function(){return e.addChildClicked()}),document.getElementById("add-sibling").addEventListener("click",function(){return e.addSiblingClicked()}),document.getElementById("cloud").addEventListener("click",function(){return e.toggleCloudClicked()}),document.getElementById("delete-node").addEventListener("click",function(){return e.deleteNodeClicked()}),document.getElementById("edit-node").addEventListener("click",function(){return e.editNodeClicked()}),document.addEventListener("keypress",function(t){return e._keyboardHandler(t)}),document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area").addEventListener("mousedown",function(t){return e._mouseDown(t)}),document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area").addEventListener("mouseup",function(t){return e._mouseUp(t)}),document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area").addEventListener("mousemove",function(t){return e._mouseMove(t)}),document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area").addEventListener("touchstart",function(t){return e._touchStart(t)}),document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area").addEventListener("touchend",function(t){return e._touchEnd(t)}),document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area").addEventListener("touchmove",function(t){return e._touchMove(t)})}Object.defineProperty(i,"__esModule",{value:!0}),i.MapViewController=o;var n=t("./App"),r=t("./Diagnostics"),s=t("./EditNodeDialog"),l=t("./main"),d=t("./NodeModel"),a=t("./Sizer"),c=t("./State"),p="Idle",h="Intertia Scroll",u="Mouse Down On Map",I="Mouse Dragging",_="Node Selected",g="One Touch Dragging",D="One Touch On Map";o.prototype.addChildClicked=function(){l.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&this._state.state===_&&this._controller.addChild(this._state.selectedNodeView.getModel())},o.prototype.addSiblingClicked=function(){var t=void 0,e=void 0;l.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&this._state.state===_&&(e=this._state.selectedNodeView.getModel(),t=e.getParent(),null!==t&&this._controller.addChildAfter(t,e))},o.prototype.deleteNodeClicked=function(){var t=void 0,e=void 0,i=void 0,o=void 0;l.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&this._state.state===_&&(e=this._state.selectedNodeView.getModel(),i=e.getParent(),null!==i&&(o=i.getChildAfter(e),null!==o?t=o:(o=i.getChildBefore(e),t=null!==o?o:i),this.nodeClicked(t.getView()),this._ensureSelectedNodeVisible(),this._controller.deleteNode(e)))},o.prototype.editNodeClicked=function(){var t=void 0;l.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&this._state.state===_&&(t=new s.EditNodeDialog(this._controller,this._state.selectedNodeView.getModel(),null))},o.prototype.getSelectedNodeView=function(){return this._state.selectedNodeView},o.prototype.getCurrentTranslationX=function(){return this._state.scroll.currentTranslationX},o.prototype.getCurrentTranslationY=function(){return this._state.scroll.currentTranslationY},o.prototype.nodeClicked=function(t){l.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&(this._state.state===_&&this._state.selectedNodeView===t?(this._state.selectedNodeView.setSelected(!1),this._state.selectedNodeView=null,this._state.state=p):this.setSelectedNodeView(t))},o.prototype.reset=function(){this._state.scroll.currentTranslationX=0,this._state.scroll.currentTranslationY=0,this._svgGElement.setAttribute("transform","translate(0,0)")},o.prototype.setSelectedNodeView=function(t){this._state.state===_&&t!==this._state.selectedNodeView&&this._state.selectedNodeView.setSelected(!1),t.setSelected(!0),this._state.selectedNodeView=t,this._state.state=_},o.prototype.toggleCloudClicked=function(){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case _:this._controller.toggleCloud(this._state.selectedNodeView.getModel())}},o.prototype.centerSelectedNode=function(){var t=void 0,e=void 0;if(null!==this._state.selectedNodeView){var i=this._state.selectedNodeView.getCoordinates();t=i.x,e=i.y,this._state.scroll.currentTranslationX=a.Sizer.svgWidth/2-t,this._state.scroll.currentTranslationY=a.Sizer.svgHeight/2-e,this._svgGElement.setAttribute("transform","translate("+this._state.scroll.currentTranslationX+(","+this._state.scroll.currentTranslationY+")"))}},o.prototype._ensureSelectedNodeVisible=function(){var t=10,e=void 0,i=0,o=0,n=void 0,r=void 0,s=void 0,l=void 0;if(null!==this._state.selectedNodeView){var d=this._state.selectedNodeView.getCoordinates();s=d.x,l=d.y,n=this._state.selectedNodeView.getBubbleHeight(),r=this._state.selectedNodeView.getBubbleWidth(),e=s+this._state.scroll.currentTranslationX,e<t?i=100-e:e+r>a.Sizer.svgWidth-t&&(i=a.Sizer.svgWidth-(e+r+t)),e=l+this._state.scroll.currentTranslationY,e<10?o=100-e:e+n>a.Sizer.svgHeight-t&&(o=a.Sizer.svgHeight-(e+n+t)),this._state.scroll.currentTranslationX+=i,this._state.scroll.currentTranslationY+=o,this._svgGElement.setAttribute("transform","translate("+this._state.scroll.currentTranslationX+(","+this._state.scroll.currentTranslationY+")"))}},o.prototype._inertiaScroll=function(){var t=void 0,e=void 0,i=void 0,o=void 0,n=void 0,r=void 0;
this._state.state===h&&(o=Date.now(),t=o-this._state.velocityCalc.previousTime,this._state.velocityCalc.previousTime=o,n=this._state.scroll.currentTranslationX,r=this._state.scroll.currentTranslationY,e=this._state.scroll.getInertiaScrollX(),i=this._state.scroll.getInertiaScrollY(),this._state.scroll.currentTranslationX=e,this._state.scroll.currentTranslationY=i,this._svgGElement.setAttribute("transform","translate("+e+", "+i+")"),Math.abs(n-e)/t>.01||Math.abs(r-i)/t>.01?window.requestAnimationFrame(this._inertiaScroll.bind(this)):this._restoreState())},o.prototype._interactionMove=function(t,e){var i=void 0,o=void 0,n=void 0,r=void 0;o=t-this._state.scroll.lastScreenX,n=e-this._state.scroll.lastScreenY,this._state.scroll.currentTranslationX+=o,this._state.scroll.currentTranslationY+=n,this._state.scroll.lastScreenX=t,this._state.scroll.lastScreenY=e,this._svgGElement.setAttribute("transform","translate("+this._state.scroll.currentTranslationX+(","+this._state.scroll.currentTranslationY+")")),r=Date.now(),i=r-this._state.velocityCalc.previousTime,i>50&&(this._state.velocityCalc.previousTime=r,o=t-this._state.velocityCalc.lastScreenX,n=e-this._state.velocityCalc.lastScreenY,this._state.velocityCalc.lastScreenX=t,this._state.velocityCalc.lastScreenY=e,this._state.velocityCalc.vx=o/i,this._state.velocityCalc.vy=n/i)},o.prototype._interactionStart=function(t,e){this._state.scroll.lastScreenX=t,this._state.scroll.lastScreenY=e,this._state.velocityCalc.lastScreenX=t,this._state.velocityCalc.lastScreenY=e,this._state.velocityCalc.previousTime=Date.now(),this._state.velocityCalc.vx=0,this._state.velocityCalc.vy=0},o.prototype._interactionStop=function(){if(0!==this._state.velocityCalc.vx||0!==this._state.velocityCalc.vy){var t=.005,e=this._state.scroll.currentTranslationX,i=this._state.scroll.currentTranslationY,o=Date.now(),n=this._state.velocityCalc.vx,r=this._state.velocityCalc.vy;this._state.scroll.getInertiaScrollX=function(){var i=void 0,r=void 0;return i=Date.now()-o,r=Math.round(n/t*(-Math.exp(-t*i)+1)+e)},this._state.scroll.getInertiaScrollY=function(){var e=void 0,n=void 0;return e=Date.now()-o,n=Math.round(r/t*(-Math.exp(-t*e)+1)+i)},this._saveState(),this._state.state=h,window.requestAnimationFrame(this._inertiaScroll.bind(this))}},o.prototype._keyboardHandler=function(t){var e=void 0,i=void 0,o=void 0,n=void 0,r=void 0;if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE&&this._state.state===_){if(r=this._state.selectedNodeView,o=r.getModel(),n=o.getParent(),!t.ctrlKey&&t.charCode>=33&&t.charCode<=126&&!l.m3App.isReadonly())return void(e=new s.EditNodeDialog(this._controller,this._state.selectedNodeView.getModel(),String.fromCharCode(t.charCode)));switch(t.key){case" ":null!==n&&0!==o.getChildren().length&&this._controller.toggleFoldedStatus(o);break;case"s":t.ctrlKey&&(this._controller.getMapModel().save(),t.preventDefault());break;case"ArrowDown":null!==n&&(t.ctrlKey?this._controller.moveNodeDown(o):(i=n.getChildAfter(o),null===i&&(i=n.getFirstChild(o.getSide())),i!==o&&(this.nodeClicked(i.getView()),this._ensureSelectedNodeVisible()))),t.preventDefault();break;case"ArrowLeft":i=null,o.getSide()===d.NodeModel.POSITION_NONE?o.isFolded()||o.getChildren().forEach(function(t){null===i&&t.getSide()===d.NodeModel.POSITION_LEFT&&(i=t)}):o.getSide()===d.NodeModel.POSITION_LEFT?o.getChildren().length>0&&!o.isFolded()&&(i=o.getChildren()[0]):i=n,null!==i&&(this.nodeClicked(i.getView()),this._ensureSelectedNodeVisible());break;case"ArrowRight":i=null,o.getSide()===d.NodeModel.POSITION_NONE?o.isFolded()||o.getChildren().forEach(function(t){null===i&&t.getSide()===d.NodeModel.POSITION_RIGHT&&(i=t)}):o.getSide()===d.NodeModel.POSITION_LEFT?i=n:o.getChildren().length>0&&!o.isFolded()&&(i=o.getChildren()[0]),null!==i&&(this.nodeClicked(i.getView()),this._ensureSelectedNodeVisible());break;case"ArrowUp":null!==o.getParent()&&(t.ctrlKey&&!l.m3App.isReadonly()?this._controller.moveNodeUp(o):(i=n.getChildBefore(o),null===i&&(i=n.getLastChild(o.getSide())),i!==o&&(this.nodeClicked(i.getView()),this._ensureSelectedNodeVisible()))),t.preventDefault();break;case"Delete":l.m3App.isReadOnly()||this.deleteNodeClicked();break;case"End":l.m3App.isReadOnly()||this.editNodeClicked();break;case"Enter":l.m3App.isReadOnly()||this.addSiblingClicked();break;case"Home":t.ctrlKey?this.centerSelectedNode():l.m3App.isReadOnly()||this.editNodeClicked();break;case"Insert":l.m3App.isReadOnly()||this.addChildClicked()}}},o.prototype._mouseDown=function(t){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case h:this._state.state=u,this._interactionStart(t.screenX,t.screenY);break;case p:case _:this._saveState(),this._state.state=u,this._interactionStart(t.screenX,t.screenY)}t.preventDefault()},o.prototype._mouseMove=function(t){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case u:case I:this._state.state=I,this._interactionMove(t.screenX,t.screenY)}t.preventDefault()},o.prototype._mouseUp=function(t){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case u:case I:this._restoreState(),this._interactionStop()}t.preventDefault()},o.prototype._restoreState=function(){this._state.state=this._state.oldState,this._state.selectedNodeView=this._state.oldSelectedNodeView},o.prototype._saveState=function(){this._state.oldState=this._state.state,this._state.oldSelectedNodeView=this._state.selectedNodeView},o.prototype._touchMove=function(t){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case D:case g:this._interactionMove(t.changedTouches[0].screenX,t.changedTouches[0].screenY),this._state.state=g}t.preventDefault()},o.prototype._touchEnd=function(t){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case g:case D:this._restoreState(),this._interactionStop()}},o.prototype._touchStart=function(t){if(l.m3App.getGlobalState().getState()===c.State.STATE_IDLE)switch(this._state.state){case h:this._state.state=D,this._interactionStart(t.changedTouches[0].screenX,t.changedTouches[0].screenY);break;case p:case _:this._saveState(),this._state.state=D,this._interactionStart(t.changedTouches[0].screenX,t.changedTouches[0].screenY)}}},{"./App":2,"./Diagnostics":10,"./EditNodeDialog":11,"./NodeModel":26,"./Sizer":32,"./State":33,"./main":36}],26:[function(t,e,i){"use strict";function o(t,e,i,n,r,s){this._controller=t,this._myMapModel=e,this._myView=null,this._parent=n,this._arrowLinks=[],this._backgroundColor="",this._children=[],this._cloudModel=null,this._font=null,this._icons=[],this._isFolded=!1,this._link=null,this._linkTargets=[],this._note=null,this._richText=null,this._textColor="#000000",this._unexpectedAttributes=new Map,this._unexpectedTags=[],null!==n&&null===n.getParent()?this._position=o.POSITION_RIGHT:this._position=null,i===o.TYPE_NEW?(this._created=Date.now(),this._id="ID_"+this._created,this._modified=this._created,this._text=r):(this._text=null,this._loadFromXml1_0_1(s))}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.NodeModel=o;var r=t("./ArrowLink"),s=t("./CloudModel"),l=t("./Diagnostics"),d=t("./Font"),a=t("./IconModel"),c=t("./LinkTarget"),p=t("./xmlHelpers"),h=t("./NodeView"),u=t("./RichContent"),I=t("./main"),_=new Map([["BACKGROUND_COLOR",""],["CREATED",""],["COLOR","#000000"],["FOLDED","false"],["ID",""],["LINK",""],["MODIFIED",""],["POSITION",""],["TEXT",""]]),g=["arrowlink","cloud","font","icon","linktarget","node","richcontent"];o.escapeSpecialChars=function(t){var e=void 0;return e=t.replace(new RegExp("&","g"),"&amp;"),e=e.replace(new RegExp("<","g"),"&lt;"),e=e.replace(new RegExp(">","g"),"&gt;"),e=e.replace(new RegExp('"',"g"),"&quot;"),e=e.replace(new RegExp("'","g"),"&apos;")},o.POSITION_NONE="none",o.POSITION_RIGHT="right",o.POSITION_LEFT="left",o.TYPE_NEW="new",o.TYPE_XML="xml",o.prototype.addChild=function(t){var e=new o(this._controller,this._myMapModel,o.TYPE_NEW,this,t);return this._children.push(e),this._myMapModel.setModifiedStatus(!0),e},o.prototype.addChildAfter=function(t,e){var i=new o(this._controller,this._myMapModel,o.TYPE_NEW,this,e);return this._children.splice(this._children.indexOf(t)+1,0,i),this._myMapModel.setModifiedStatus(!0),i},o.prototype.connectArrowLinks=function(){var t=this;this._arrowLinks.forEach(function(e){e.connectToNodeModel(t._myMapModel)})},o.prototype.deleteChild=function(t){this._children.splice(this._children.indexOf(t),1),this._myMapModel.setModifiedStatus(!0)},o.prototype.getArrowLinks=function(){return this._arrowLinks},o.prototype.getAsXml=function(){var t=void 0,e=void 0,i=void 0,n=void 0,r=void 0,s=[];for(e=new Map,e.set("BACKGROUND_COLOR",this._backgroundColor),e.set("COLOR",this._textColor),e.set("CREATED",this._created),this._isFolded===!0?e.set("FOLDED","true"):e.set("FOLDED","false"),e.set("ID",this._id),null!==this._link&&e.set("LINK",o.escapeSpecialChars(this._link)),e.set("MODIFIED",this._modified),null!==this._parent&&null===this._parent.getParent()?e.set("POSITION",this._position):e.set("POSITION",_.get("POSITION")),null!==this._text&&(t="",this._text.forEach(function(e,i){r=o.escapeSpecialChars(e),0!==i?t+="&#xa;"+r:t=r}),e.set("TEXT",t)),i=[],this._arrowLinks.forEach(function(t){i.push(t)}),null!==this._cloudModel&&i.push(this._cloudModel),null!==this._font&&i.push(this._font),this._icons.forEach(function(t){i.push(t)}),this._linkTargets.forEach(function(t){i.push(t)}),null!==this._richText&&i.push(this._richText),null!==this._note&&i.push(this._note),n=0;n<this._children.length;n++)i.push(this._children[n]);return s=(0,p.createXml)("node",_,e,this._unexpectedAttributes,i,this._unexpectedTags)},o.prototype.getBackgroundColor=function(){return this._backgroundColor},o.prototype.getChildAfter=function(t){var e=void 0,i=void 0,o=void 0;if(i=this._children.indexOf(t)+1,e=null,null!==this._parent)i<this._children.length&&(e=this._children[i]);else for(o=t.getSide();null===e&&i<this._children.length;)this._children[i].getSide()===o&&(e=this._children[i]),i++;return e},o.prototype.getChildBefore=function(t){var e=void 0,i=void 0,o=void 0;if(i=this._children.indexOf(t)-1,e=null,null!==this._parent)i>=0&&(e=this._children[i]);else for(o=t.getSide();null===e&&i>=0;)this._children[i].getSide()===o&&(e=this._children[i]),i--;return e},o.prototype.getChildren=function(){return this._children},o.prototype.getCloudModel=function(){return this._cloudModel},o.prototype.getCreatedTimestamp=function(){return this._created},o.prototype.getFirstChild=function(t){var e=void 0,i=void 0;for(i=null,e=0;null===i&&e<this._children.length;)this._children[e].getSide()===t&&(i=this._children[e]),e++;return i},o.prototype.getFont=function(){return this._font},o.prototype.getIcons=function(){return this._icons},o.prototype.getId=function(){return this._id},o.prototype.getLastChild=function(t){var e=void 0,i=void 0;for(i=null,e=this._children.length-1;null===i&&e>=0;)this._children[e].getSide()===t&&(i=this._children[e]),e--;return i},o.prototype.getLink=function(){return this._link},o.prototype.getLinkTargets=function(){return this._linkTargets},o.prototype.getModifiedTimestamp=function(){return this._modified},o.prototype.getNote=function(){var t=void 0;return t=null,null!==this._note&&(t=this._note.getContent()),t},o.prototype.getParent=function(){return this._parent},o.prototype.getRichText=function(){var t=void 0;return t=null,null!==this._richText&&(t=this._richText.getContent()),t},o.prototype.getSide=function(){var t=void 0;return t=null===this._parent?o.POSITION_NONE:null===this._parent.getParent()?this._position:this._parent.getSide()},o.prototype.getText=function(){return this._text},o.prototype.getTextColor=function(){return this._textColor},o.prototype.getView=function(){return null===this._myView&&(this._myView=new h.NodeView(this._controller,this)),this._myView},o.prototype.hasCloud=function(){return null!==this._cloudModel},o.prototype.isFolded=function(){return this._isFolded},o.prototype._loadFromXml1_0_1=function(t){var e=void 0,i=void 0,h=void 0,D=void 0,E=void 0,T=void 0,m=void 0,v=void 0,y=void 0,A=void 0,f=void 0,M=void 0,b=void 0,L=void 0,S=(0,p.loadXml)(t,_,g),N=n(S,4);for(E=N[0],b=N[1],T=N[2],L=N[3],this._backgroundColor=E.get("BACKGROUND_COLOR"),this._created=E.get("CREATED"),this._textColor=E.get("COLOR"),"true"===E.get("FOLDED")?this._isFolded=!0:this._isFolded=!1,this._id=E.get("ID"),this._link=E.get("LINK"),""===this._link&&(this._link=null),this._modified=E.get("MODIFIED"),this._position=E.get("POSITION"),this._text=E.get("TEXT").split("\n"),this._unexpectedAttributes=b,I.m3App.getDiagnostics().log(l.Diagnostics.TASK_IMPORT_XML,"Created node: "+this._text),v=T.length,e=0;e<v;e++)h=T[e],M=h.tagName,"node"===M?(m=new o(this._controller,this._myMapModel,o.TYPE_XML,this,"",h),this._children.push(m)):"arrowlink"===M?(i=new r.ArrowLink,i.loadFromXml1_0_1(h),this._arrowLinks.push(i)):"cloud"===M?(this._cloudModel=new s.CloudModel,this._cloudModel.loadFromXml1_0_1(h)):"font"===M?(this._font=new d.Font,this._font.loadFromXml1_0_1(h)):"icon"===M?(D=new a.IconModel,D.loadFromXml1_0_1(h),this._icons.push(D)):"linktarget"===M?(f=new c.LinkTarget,f.loadFromXml1_0_1(h),this._linkTargets.push(f)):"richcontent"===M&&(y=new u.RichContent,y.loadFromXml1_0_1(h),A=y.getType(),"NODE"===A?this._richText=y:"NOTE"===A?this._note=y:I.m3App.getDiagnostics().warn(l.Diagnostics.TASK_IMPORT_XML,"<node>: Unexpected type of richcontent: "+y.getType()));this._unexpectedTags=L},o.prototype.moveChildDown=function(t){var e=void 0,i=void 0,o=void 0;1!==this._children.length&&(e=this._children.indexOf(t),null!==this._parent?e!==this._children.length-1?(o=this._children[e+1],this._children[e]=o,this._children[e+1]=t):(this._children.pop(),this._children.unshift(t)):(o=this.getChildAfter(t),null!==o?(i=this._children.indexOf(o),this._children[e]=o,this._children[i]=t):(o=this.getFirstChild(t.getSide()),o!==t&&(this._children.splice(e,1),this._children.unshift(t)))))},o.prototype.moveChildUp=function(t){var e=void 0,i=void 0,o=void 0;1!==this._children.length&&(e=this._children.indexOf(t),null!==this._parent?0!==e?(o=this._children[e-1],this._children[e-1]=t,this._children[e]=o):(this._children.shift(),this._children.push(t)):(o=this.getChildBefore(t),null!==o?(i=this._children.indexOf(o),this._children[e]=o,this._children[i]=t):(o=this.getLastChild(t.getSide()),o!==t&&(this._children.splice(e,1),this._children.push(t)))))},o.prototype.setBackgroundColor=function(t){this._backgroundColor=t,this._modified=Date.now(),this._myMapModel.setModifiedStatus(!0)},o.prototype.setText=function(t){this._text=t,this._modified=Date.now(),this._myMapModel.setModifiedStatus(!0)},o.prototype.setTextColor=function(t){this._textColor=t,this._modified=Date.now(),this._myMapModel.setModifiedStatus(!0)},o.prototype.toggleCloud=function(){null===this._cloudModel?this._cloudModel=new s.CloudModel:this._cloudModel=null,this._hasCloud=!this._hasCloud,this._myMapModel.setModifiedStatus(!0)},o.prototype.toggleFoldedStatus=function(){this._isFolded=!this._isFolded,this._myMapModel.setModifiedStatus(!0)}},{"./ArrowLink":4,"./CloudModel":6,"./Diagnostics":10,"./Font":15,"./IconModel":17,"./LinkTarget":21,"./NodeView":27,"./RichContent":29,"./main":36,"./xmlHelpers":38}],27:[function(t,e,i){"use strict";function o(t,e){var i=this,o=void 0;this._controller=t,this._myNodeModel=e,this._isRoot=null===this._myNodeModel.getParent(),this._isVisible=!0,this._mostRecentCloudColor=null,this._myIconViews=[],this._myLinkIconView=null,this._myConnector=null,this._myFoldingIcon=null,this._myGraphicalLinks=[],this._mySide=this._myNodeModel.getSide(),this._isRoot!==!0&&(this._myConnector=new s.ConnectorView(this)),null===e.getRichText()?this._myText=new u.TextView(this,e):this._myText=new h.RichTextView(this,e),e.getIcons().forEach(function(t){i._myIconViews.push(new a.IconView(i,t))}),o=e.getLink(),null!==o&&"#"!==o[0]&&(this._myLinkIconView=new c.LinkIconView(this,e)),this._myBubble=new n.BubbleView(this,this._myNodeModel,this._getBubbleContentsWidth(),this._getBubbleContentsHeight()),this._myNodeModel.hasCloud()?this._myCloud=new r.CloudView(this._myNodeModel.getCloudModel()):this._myCloud=null,0!==this._myNodeModel.getChildren().length&&this._isRoot!==!0&&(this._myFoldingIcon=new l.FoldingIconView(this,this._myNodeModel)),this._myNodeModel.getArrowLinks().forEach(function(t){i._myGraphicalLinks.push(new d.GraphicalLinkView(i,t))})}Object.defineProperty(i,"__esModule",{value:!0}),i.NodeView=o;var n=t("./BubbleView"),r=t("./CloudView"),s=t("./ConnectorView"),l=t("./FoldingIconView"),d=t("./GraphicalLinkView"),a=t("./IconView"),c=t("./LinkIconView"),p=t("./NodeModel"),h=t("./RichTextView"),u=t("./TextView");o.VERTICAL_SEPARATION=15,o.prototype.calcDimensions=function(){var t=void 0;0===this._myNodeModel.getChildren().length||this._myNodeModel.isFolded()||this._myNodeModel.getChildren().forEach(function(t){t.getView().calcDimensions()}),this._myWidth=this._myBubble.getWidth(),this._myHeight=this._myBubble.getHeight(),this._isRoot?(this._myTotalWidth=this._myWidth,0!==this._myNodeModel.getChildren().length&&(t=this.getMaxChildTotalWidth(p.NodeModel.POSITION_LEFT),0!==t&&(this._myTotalWidth+=s.ConnectorView.WIDTH+t),t=this.getMaxChildTotalWidth(p.NodeModel.POSITION_RIGHT),0!==t&&(this._myTotalWidth+=s.ConnectorView.WIDTH+t)),this._myTotalHeight=this._myHeight,this._myTotalHeight=Math.max(this._myTotalHeight,this.getTotalChildrenHeight(p.NodeModel.POSITION_LEFT)),this._myTotalHeight=Math.max(this._myTotalHeight,this.getTotalChildrenHeight(p.NodeModel.POSITION_RIGHT))):(this._myTotalWidth=this._myWidth,0!==this._myNodeModel.getChildren().length&&(this._myTotalWidth+=this._myFoldingIcon.getWidth(),this._myNodeModel.isFolded()!==!0&&(this._myTotalWidth+=s.ConnectorView.WIDTH,this._myTotalWidth+=this.getMaxChildTotalWidth(this._mySide))),this._myTotalHeight=this._myBubble.getHeight(),0!==this._myNodeModel.getChildren().length&&(this._myTotalHeight=Math.max(this._myHeight,this._myFoldingIcon.getHeight()),this._myNodeModel.isFolded()!==!0&&(this._myTotalHeight=Math.max(this._myTotalHeight,this.getTotalChildrenHeight(this._mySide))))),this._myNodeModel.hasCloud()?(this._myCloud.setAreaToEnclose(this._myTotalWidth,this._myTotalHeight),this._myTotalWidth=this._myCloud.getWidth(),this._myTotalHeight=this._myCloud.getHeight()):this._myCloud=null},o.prototype.deleteMyself=function(){null!==this._myConnector&&this._myConnector.deleteSvg(),this._myText.deleteSvg(),this._myBubble.deleteSvg(),null!==this._myCloud&&this._myCloud.deleteSvg(),null!==this._myFoldingIcon&&this._myFoldingIcon.deleteSvg(),this._myGraphicalLinks.forEach(function(t){t.deleteSvg()}),this._myIconViews.forEach(function(t){t.deleteSvg()}),null!==this._myLinkIconView&&this._myLinkIconView.deleteSvg()},o.prototype.drawAt=function(t,e,i,o){this._x=t,this._y=e;var r=void 0,l=void 0,d=void 0;this._isRoot&&(this.setVisible(!0),this.setMostRecentCloudColor(null)),this._isRoot!==!0&&(this._mySide===p.NodeModel.POSITION_LEFT?this._myConnector.setPosition(t+this.getBubbleWidth(),e,i,o):this._myConnector.setPosition(t,e,i,o)),d=t+n.BubbleView.BUBBLE_INNER_PADDING,this._myIconViews.forEach(function(t){t.setPosition(d,e),d+=t.getWidth()+n.BubbleView.BUBBLE_INNER_PADDING}),this._myText.setPosition(d,e),d+=this._myText.getWidth()+n.BubbleView.BUBBLE_INNER_PADDING,null!==this._myLinkIconView&&this._myLinkIconView.setPosition(d,e),this._myBubble.setPosition(t,e),this._myBubble.setMostRecentCloudColor(this._mostRecentCloudColor),null!==this._myCloud&&(this._isRoot?(r=this.getMaxChildTotalWidth(p.NodeModel.POSITION_LEFT),l=0!==r?t-s.ConnectorView.WIDTH-r:t):this._mySide===p.NodeModel.POSITION_LEFT?0===this._myNodeModel.getChildren().length?l=t:(l=t-this._myFoldingIcon.getWidth(),r=this.getMaxChildTotalWidth(p.NodeModel.POSITION_LEFT),0!==r&&(l=t-this._myFoldingIcon.getWidth()-s.ConnectorView.WIDTH-r)):l=t,this._myCloud.setPosition(l,e)),0!==this._myNodeModel.getChildren().length&&(this._isRoot?this._myNodeModel.isFolded()===!1&&(this._drawChildren(p.NodeModel.POSITION_LEFT),this._drawChildren(p.NodeModel.POSITION_RIGHT)):(this._mySide===p.NodeModel.POSITION_LEFT?this._myFoldingIcon.setPosition(t-this._myFoldingIcon.getWidth(),e):this._myFoldingIcon.setPosition(t+this._myBubble.getWidth(),e),this._myNodeModel.isFolded()?this._myNodeModel.getChildren().forEach(function(t){t.getView().setVisible(!1)}):this._drawChildren(this._mySide)))},o.prototype._drawChildren=function(t){var e=this,i=void 0,n=void 0,r=void 0,l=void 0,d=void 0;d=this._isRoot?0:this._myFoldingIcon.getWidth(),t===p.NodeModel.POSITION_LEFT?(l=this._x-d,i=l-s.ConnectorView.WIDTH):(l=this._x+this._myBubble.getWidth()+d,i=l+s.ConnectorView.WIDTH),n=this._y-this.getTotalChildrenHeight(t)/2,this._myNodeModel.getChildren().forEach(function(d){d.getSide()===t&&(r=d.getView(),i=t===p.NodeModel.POSITION_LEFT?l-s.ConnectorView.WIDTH-r.getBubbleWidth():l+s.ConnectorView.WIDTH,n+=r.getTotalHeight()/2,r.drawAt(i,n,l,e._y),n+=r.getTotalHeight()/2+o.VERTICAL_SEPARATION)})},o.prototype.drawGraphicalLinks=function(){this._myGraphicalLinks.forEach(function(t){t.draw()})},o.prototype._getBubbleContentsHeight=function(){var t=void 0;return t=this._myText.getHeight(),0!==this._myIconViews.length&&(t=Math.max(t,this._myIconViews[0].getHeight())),null!==this._myLinkIconView&&(t=Math.max(t,this._myLinkIconView.getHeight())),t},o.prototype._getBubbleContentsWidth=function(){var t=void 0;return t=0,0!==this._myIconViews.length&&(t+=(this._myIconViews[0].getWidth()+n.BubbleView.BUBBLE_INNER_PADDING)*this._myIconViews.length),t+=this._myText.getWidth(),null!==this._myLinkIconView&&(t+=n.BubbleView.BUBBLE_INNER_PADDING+this._myLinkIconView.getWidth()),t},o.prototype.getBubbleHeight=function(){return this._myBubble.getHeight()},o.prototype.getBubbleWidth=function(){return this._myBubble.getWidth()},o.prototype.getCoordinates=function(){return{x:this._x,y:this._y}},o.prototype.getGraphicalLinkCoords=function(){var t={x:null,y:null};return this.isRoot||this._mySide===p.NodeModel.POSITION_RIGHT?(t.x=this._x+this._myBubble.getWidth()+d.GraphicalLinkView.ARROW_WIDTH,null!==this._myFoldingIcon&&(t.x+=this._myFoldingIcon.getWidth()),t.y=this._y):(t.x=this._x-d.GraphicalLinkView.ARROW_WIDTH,null!==this._myFoldingIcon&&(t.x-=this._myFoldingIcon.getWidth()),t.y=this._y),t},o.prototype.getMaxChildTotalWidth=function(t){var e=0;return this._myNodeModel.isFolded()!==!0&&this._myNodeModel.getChildren().forEach(function(i){i.getSide()===t&&(e=Math.max(e,i.getView().getTotalWidth()))}),e},o.prototype.getModel=function(){return this._myNodeModel},o.prototype.getTotalChildrenHeight=function(t){var e=0,i=0;return this._myNodeModel.isFolded()!==!0&&(this._myNodeModel.getChildren().forEach(function(o){o.getSide()===t&&(i+=o.getView().getTotalHeight(),e+=1)}),i+=(e-1)*o.VERTICAL_SEPARATION),i},o.prototype.getTotalHeight=function(){return this._myTotalHeight},o.prototype.getTotalWidth=function(){return this._myTotalWidth},o.prototype.isVisible=function(){return this._isVisible},o.prototype.setMostRecentCloudColor=function(t){var e=this,i=void 0;this._mostRecentCloudColor=t,i=this._myNodeModel.getCloudModel(),null!==i&&(this._mostRecentCloudColor=i.getColor()),this._myNodeModel.getChildren().forEach(function(t){t.getView().setMostRecentCloudColor(e._mostRecentCloudColor)})},o.prototype.setSelected=function(t){this._myBubble.setSelected(t)},o.prototype.setVisible=function(t){var e=void 0;this._isVisible=t,e=this._controller.getMapViewController(),t===!1&&e.getSelectedNodeView()===this&&e.nodeClicked(this),null!==this._myConnector&&this._myConnector.setVisible(t),this._myIconViews.forEach(function(e){e.setVisible(t)}),this._myText.setVisible(t),null!==this._myLinkIconView&&this._myLinkIconView.setVisible(t),this._myBubble.setVisible(t),null!==this._myFoldingIcon&&this._myFoldingIcon.setVisible(t),null!==this._myCloud&&this._myCloud.setVisible(t),this._myNodeModel.getChildren().forEach(function(e){e.getView().setVisible(t)})},o.prototype.update=function(){this._myText.update(),this._myBubble.update(this._getBubbleContentsWidth(),this._getBubbleContentsHeight()),null!==this._myNodeModel.getLink()&&null===this._myLinkIconView&&(this._myLinkIconView=new c.LinkIconView(this,this._myNodeModel)),null===this._myNodeModel.getLink()&&null!==this._myLinkIconView&&(this._myLinkIconView.deleteSvg(),this._myLinkIconView=null),this._myNodeModel.hasCloud()&&null===this._myCloud&&(this._myCloud=new r.CloudView(this._myNodeModel.getCloudModel())),this._myNodeModel.hasCloud()!==!0&&null!==this._myCloud&&(this._myCloud.deleteSvg(),this._myCloud=null),this._isRoot!==!0&&(this._myNodeModel.getChildren().length>0&&null===this._myFoldingIcon&&(this._myFoldingIcon=new l.FoldingIconView(this,this._myNodeModel)),0===this._myNodeModel.getChildren().length&&null!==this._myFoldingIcon&&(this._myFoldingIcon.deleteSvg(),this._myFoldingIcon=null),null!==this._myFoldingIcon&&this._myFoldingIcon.update())}},{"./BubbleView":5,"./CloudView":7,"./ConnectorView":8,"./FoldingIconView":14,"./GraphicalLinkView":16,"./IconView":18,"./LinkIconView":20,"./NodeModel":26,"./RichTextView":30,"./TextView":34}],28:[function(t,e,i){"use strict";function o(t,e){var i=this,r=void 0,a=void 0,c=void 0,p=void 0;p=t[e].name.replace(new RegExp("&","g"),"&amp;"),p=p.replace(new RegExp("<","g"),"&lt;"),p=p.replace(new RegExp(">","g"),"&gt;"),p=p.replace(new RegExp('"',"g"),"&quot;"),p=p.replace(new RegExp("'","g"),"&apos;"),a="<div id='"+o.DIALOG_ID+"' class='popup' "+("style='height: "+l.Sizer.popupHeight+"px'>")+"<p style='text-align: center; font-weight: bold'>Saved Maps</p>",t.forEach(function(t,i){i!==e&&(a+="<p>"+t.name+"</p>")}),a+="<p>Old name: "+p+"</p>",a+="<p>New name: <input type='text' id='"+(o.INPUT_FIELD_ID+"'")+("size='30' value='"+p+"'/>"),a+="   <br><br><button id='"+o.OK_ID+"'>Ok</button>"+("   <button id='"+o.CANCEL_ID+"'>Cancel</button>")+"</div>",r=new DOMParser,c=r.parseFromString(a,"text/html"),this._renameMapDialog=document.importNode(c.getElementById(o.DIALOG_ID),!0),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").appendChild(this._renameMapDialog),document.getElementById(o.OK_ID).addEventListener("click",function(){return i.renameMap(t,e)}),document.getElementById(o.CANCEL_ID).addEventListener("click",function(){return i.close()}),document.getElementById(o.INPUT_FIELD_ID).addEventListener("keypress",function(o){return i.keyPress(o,t,e)}),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),s.m3App.getGlobalState().setState(d.State.STATE_DIALOG_RENAME_MAP),document.getElementById(o.INPUT_FIELD_ID).select(),document.getElementById(o.INPUT_FIELD_ID).focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.RenameMapDialog=o;var n=t("./App"),r=t("./ErrorDialog"),s=t("./main"),l=t("./Sizer"),d=t("./State");o.DIALOG_ID=n.App.HTML_ID_PREFIX+"-renameMapDialog",o.CANCEL_ID=o.DIALOG_ID+"Cancel",o.OK_ID=o.DIALOG_ID+"Ok",o.INPUT_FIELD_ID=o.DIALOG_ID+"InputField",o.MAP_LIST_PREFIX=o.DIALOG_ID,o.prototype.close=function(){var t=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._renameMapDialog),s.m3App.getGlobalState().setState(d.State.STATE_IDLE)},o.prototype.keyPress=function(t,e,i){13===t.keyCode&&this.renameMap(e,i)},o.prototype.renameMap=function(t,e){var i=this,l=void 0,d=void 0;d=document.getElementById(o.INPUT_FIELD_ID).value,d!==t[e].name&&(s.m3App.getController().getMapModel().getDbKey()===t[e].key&&s.m3App.getController().getMapModel().setMapName(d),l={key:t[e].key,name:d},t.splice(e,1,l),n.App.myDB.setItem(n.App.KEY_MAPLIST,t).then(function(){i.close()}).catch(function(i){new r.ErrorDialog("Error trying to rename map from "+(t[e].name+" to "+d+": "+i))}))}},{"./App":2,"./ErrorDialog":12,"./Sizer":32,"./State":33,"./main":36}],29:[function(t,e,i){"use strict";function o(){this._content=null,this._type=null,this._unexpectedAttributes=new Map,this._unexpectedTags=[]}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.RichContent=o;var r=t("./Diagnostics"),s=t("./xmlHelpers"),l=t("./main"),d=new Map([["TYPE",""]]),a=["html"];o.prototype.getAsXml=function(){var t=new Map,e=void 0,i=void 0,o=[];return t.set("TYPE",this._type),e={},e._content=this._content,e.getAsXml=function(){return[this._content]},i=[e],o=(0,s.createXml)("richcontent",d,t,this._unexpectedAttributes,i,this._unexpectedTags)},o.prototype.getContent=function(){return this._content},o.prototype.getType=function(){return this._type},o.prototype.loadFromXml1_0_1=function(t){var e=void 0,i=void 0,o=void 0,c=void 0,p=void 0,h=void 0,u=void 0,I=void 0,_=void 0;h=new XMLSerializer;var g=(0,s.loadXml)(t,d,a),D=n(g,4);for(o=D[0],I=D[1],c=D[2],_=D[3],this._type=o.get("TYPE"),this._unexpectedAttributes=I,this._unexpectedTags=_,p=c.length,e=0;e<p;e++)i=c[e],u=i.tagName,"html"===u&&(this._content=h.serializeToString(i));null===this._content&&l.m3App.getDiagnostics().warn(r.Diagnostics.TASK_IMPORT_XML,"No content in <richcontent>"),l.m3App.getDiagnostics().log(r.Diagnostics.TASK_IMPORT_XML,"Created richcontent.")},o.prototype.setContent=function(t){this._content=t},o.prototype.setType=function(t){this._type=t}},{"./Diagnostics":10,"./main":36,"./xmlHelpers":38}],30:[function(t,e,i){"use strict";function o(t,e){var i="http://www.w3.org/2000/svg";this._myNodeModel=e,this._myNodeView=t,this._container=document.createElementNS(i,"foreignObject"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").appendChild(this._container),this._boundClickListener=this._clickListener.bind(this),this._container.addEventListener("click",this._boundClickListener),this.update()}Object.defineProperty(i,"__esModule",{value:!0}),i.RichTextView=o;var n=t("./App"),r=t("./main"),s=t("./Sizer"),l=400;o.prototype._clickListener=function(){r.m3App.getController().getMapViewController().nodeClicked(this._myNodeView)},o.prototype.deleteSvg=function(){this._container.removeEventListener("click",this._boundClickListener),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").removeChild(this._container)},o.prototype.getHeight=function(){return this._height},o.prototype.getWidth=function(){return this._width},o.prototype.setPosition=function(t,e){this._container.setAttribute("x",t),this._container.setAttribute("y",e-this._height/2)},o.prototype.setVisible=function(t){t?this._container.setAttribute("visibility","visible"):this._container.setAttribute("visibility","hidden")},o.prototype.update=function(){for(var t=void 0,e=void 0,i=void 0,o=void 0,n=void 0,r=void 0,d=void 0,a=void 0;this._container.childNodes.length>0;)this._container.removeChild(this._container.childNodes[0]);for(t=new DOMParser,o=t.parseFromString(this._myNodeModel.getRichText(),"text/html"),n=document.importNode(o.documentElement,!0),this._container.appendChild(n),this._container.setAttribute("height",1e4),d=10,a=Math.min(l,.8*s.Sizer.svgWidth),this._container.setAttribute("width",a),i=n.clientHeight;a-d>10;)r=Math.floor((a-d)/2)+d,this._container.setAttribute("width",r),n.clientHeight===i?a=r:d=r;e=a<n.scrollWidth?n.scrollWidth:a,
this._container.setAttribute("width",e),this._container.setAttribute("height",n.clientHeight+s.Sizer.characterHeight),this._width=e,this._height=n.clientHeight+s.Sizer.characterHeight}},{"./App":2,"./Sizer":32,"./main":36}],31:[function(t,e,i){"use strict";function o(){var t=this,e=void 0,i=void 0,r=void 0;i="<div id='"+o.DIALOG_ID+"' class='popup' style='height: "+(l.Sizer.popupHeight+"px'>")+"<p style='text-align: center; font-weight: bold'>Save Map</p>",n.App.myDB.getItem(n.App.KEY_MAPLIST).then(function(l){l.forEach(function(t){i+="<p>"+t.name+"</p>"}),i+="<input type='text' id='"+o.INPUT_FIELD_ID+"'size='20' value='"+(s.m3App.getController().getMapModel().getMapName()+"'/>"),i+="   <br><br><button id='"+o.SAVE_ID+"'>Save</button>"+("   <button id='"+o.CANCEL_ID+"'>Cancel</button>")+"</div>",e=new DOMParser,r=e.parseFromString(i,"text/html"),t._saveDialog=document.importNode(r.getElementById(o.DIALOG_ID),!0),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").appendChild(t._saveDialog),document.getElementById(o.SAVE_ID).addEventListener("click",function(){return t.saveMap()}),document.getElementById(o.CANCEL_ID).addEventListener("click",function(){return t.close()}),document.getElementById(o.INPUT_FIELD_ID).addEventListener("keypress",function(e){return t.keyPress(e)}),document.getElementById(n.App.HTML_ID_PREFIX+"-popups").removeAttribute("hidden"),s.m3App.getGlobalState().setState(d.State.STATE_DIALOG_SAVE),document.getElementById(o.INPUT_FIELD_ID).select(),document.getElementById(o.INPUT_FIELD_ID).focus()})}Object.defineProperty(i,"__esModule",{value:!0}),i.SaveDialog=o;var n=t("./App"),r=t("./ErrorDialog"),s=t("./main"),l=t("./Sizer"),d=t("./State");o.DIALOG_ID="m3-saveDialog",o.CANCEL_ID=o.DIALOG_ID+"Cancel",o.SAVE_ID=o.DIALOG_ID+"Save",o.INPUT_FIELD_ID=o.DIALOG_ID+"InputField",o.prototype.close=function(){var t=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("hidden","true"),t.removeChild(this._saveDialog),s.m3App.getGlobalState().setState(d.State.STATE_IDLE)},o.prototype.keyPress=function(t){13===t.keyCode&&this.saveMap()},o.prototype.saveMap=function(){var t=this,e=void 0,i=void 0;i=document.getElementById(o.INPUT_FIELD_ID).value,s.m3App.getController().getMapModel().setMapName(i),e=s.m3App.getController().getMapModel().getDbKey(),null===e&&(e="map-"+Date.now()),n.App.myDB.setItem(e,s.m3App.getController().getMapModel().getAsXml()).then(function(){return s.m3App.getController().getMapModel().setModifiedStatus(!1),n.App.myDB.getItem(n.App.KEY_MAPLIST)}).then(function(t){return null===s.m3App.getController().getMapModel().getDbKey()&&(s.m3App.getController().getMapModel().setDbKey(e),t.push({key:e,name:i})),n.App.myDB.setItem(n.App.KEY_MAPLIST,t)}).then(function(){t.close()}).catch(function(t){new r.ErrorDialog("Error saving map: "+t)})}},{"./App":2,"./ErrorDialog":12,"./Sizer":32,"./State":33,"./main":36}],32:[function(t,e,i){"use strict";function o(){var t=void 0,e=void 0,i=void 0;t=document.getElementById(n.App.HTML_ID_PREFIX+"-app"),e=document.getElementById(n.App.HTML_ID_PREFIX+"-drawing-area"),i=document.getElementById(n.App.HTML_ID_PREFIX+"-svg-element"),t.style.marginTop=o._MARGINS.appMarginTop+"px",t.style.marginBottom=o._MARGINS.appMarginBottom+"px",t.style.marginLeft=o._MARGINS.appMarginLeft+"px",t.style.marginRight=o._MARGINS.appMarginRight+"px",i.setAttribute("style","border: "+o._SVG_BORDER_WIDTH+"px solid black;"),o._SIDE_ICONS_WIDTH=r.m3App.showButtons()&&!r.m3App.isReadOnly()?40:0,o._BOTTOM_ICONS_HEIGHT=r.m3App.showButtons()?48:8,window.addEventListener("resize",o.setSize),o.setSize()}Object.defineProperty(i,"__esModule",{value:!0}),i.Sizer=o;var n=t("./App"),r=t("./main");o._MARGINS={appMarginTop:1,appMarginBottom:1,appMarginLeft:1,appMarginRight:1},o._SVG_BORDER_WIDTH=1,o.setSize=function(){var t=void 0,e=void 0,i=void 0,s=void 0,l=void 0,d=void 0,a=void 0,c=void 0,p=void 0,h=void 0;i=document.getElementById(n.App.HTML_ID_PREFIX+"-container"),r.m3App.isFullPage()?(i.style.height=window.innerHeight+"px",document.getElementsByTagName("body")[0].style.overflow="hidden"):(s=r.m3App.getHeight(),"%"===s[s.length-1]?i.style.height=window.innerHeight*s.slice(0,-1)/100+"px":i.style.height=s,i.style.width=r.m3App.getWidth()),p=i.clientHeight-o._MARGINS.appMarginTop-o._MARGINS.appMarginBottom,h=i.clientWidth,e=r.m3App.showMapName()?document.getElementById(n.App.HTML_ID_PREFIX+"-top").clientHeight:0,l=document.getElementById(n.App.HTML_ID_PREFIX+"-svg-element"),d=p-e-2*o._SVG_BORDER_WIDTH-o._BOTTOM_ICONS_HEIGHT,a=h-2*o._SVG_BORDER_WIDTH-o._SIDE_ICONS_WIDTH,l.setAttribute("height",d+"px"),l.setAttribute("width",a+"px"),o.svgHeight=d,o.svgWidth=a,document.getElementById(n.App.HTML_ID_PREFIX+"-left").style.width=h-o._SIDE_ICONS_WIDTH+"px",document.getElementById(n.App.HTML_ID_PREFIX+"-right").style.marginTop=e+o.svgHeight-190+"px",o.popupHeight=p/3,t=document.getElementById(n.App.HTML_ID_PREFIX+"-popups"),t.setAttribute("style","width: "+3*a/4+"px;margin-left: "+1*a/4/2+"px;"),c=document.createElement("span"),c.appendChild(document.createTextNode("X")),document.getElementById(n.App.HTML_ID_PREFIX+"-html-sizing").appendChild(c),o.characterWidth=c.offsetWidth,o.characterHeight=c.offsetHeight,document.getElementById(n.App.HTML_ID_PREFIX+"-html-sizing").removeChild(c)}},{"./App":2,"./main":36}],33:[function(t,e,i){"use strict";function o(){this._state=o.STATE_IDLE}Object.defineProperty(i,"__esModule",{value:!0}),i.State=o,o.STATE_IDLE="Idle",o.STATE_DIALOG_ABOUT="About Dialog",o.STATE_DIALOG_EDIT_NODE="Edit Node Dialog",o.STATE_DIALOG_ERROR="Error Dialog",o.STATE_DIALOG_IMPORT_EXPORT="Import Export Dialog",o.STATE_DIALOG_LOAD="Load Dialog",o.STATE_DIALOG_MANAGE_SAVED_MAPS="Manage Saved Maps Dialog",o.STATE_DIALOG_RENAME_MAP="Rename Map Dialog",o.STATE_DIALOG_SAVE="Save Dialog",o.STATE_EXPORT_POPUP="Export Popup",o.prototype.getState=function(){return this._state},o.prototype.setState=function(t){this._state=t}},{}],34:[function(t,e,i){"use strict";function o(t,e){this._myNodeModel=e,this._myNodeView=t,this._characterHeight=0,this._x=0,this._svgText=document.createElementNS(d,"text"),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").appendChild(this._svgText),this._boundClickListener=this._clickListener.bind(this),this._svgText.addEventListener("click",this._boundClickListener),this.update()}Object.defineProperty(i,"__esModule",{value:!0}),i.TextView=o;var n=t("./App"),r=t("./main"),s=t("./Sizer"),l=400,d="http://www.w3.org/2000/svg";o.prototype._clickListener=function(){r.m3App.getController().getMapViewController().nodeClicked(this._myNodeView)},o.prototype.deleteSvg=function(){this._svgText.removeEventListener("click",this._boundClickListener),document.getElementById(n.App.HTML_ID_PREFIX+"-svgTextLayer").removeChild(this._svgText)},o.prototype.getHeight=function(){return this._svgText.getElementsByTagNameNS(d,"tspan").length*this._characterHeight},o.prototype.getWidth=function(){return this._svgText.getBBox().width},o.prototype.setPosition=function(t,e){var i=void 0,o=void 0,n=void 0;for(n=this._svgText.getElementsByTagNameNS(d,"tspan"),o=e+this.getHeight()/2-(n.length-1)*this._characterHeight,i=0;i<n.length;i++)n[i].setAttribute("x",t),n[i].setAttribute("y",o+this._characterHeight*i);this._x=t},o.prototype.setVisible=function(t){t?this._svgText.setAttribute("visibility","visible"):this._svgText.setAttribute("visibility","hidden")},o.prototype.update=function(){var t=this;for(null===this._myNodeModel.getFont()?(this._svgText.setAttribute("font-size","12"),this._svgText.setAttribute("font-family","verdana")):(this._myNodeModel.getFont().isBold()&&this._svgText.setAttribute("font-weight","bold"),this._myNodeModel.getFont().isItalic()&&this._svgText.setAttribute("font-style","italic"),this._svgText.setAttribute("font-size",this._myNodeModel.getFont().getSize())),this._svgText.setAttribute("fill",this._myNodeModel.getTextColor());this._svgText.childNodes.length>0;)this._svgText.removeChild(this._svgText.childNodes[0]);this._characterHeight=this._getCharacterHeight(),this._myNodeModel.getText().forEach(function(e){t._addTspans(e)})},o.prototype._addTspans=function(t){var e=Math.min(l,.8*s.Sizer.svgWidth),i=void 0,o=void 0,n=void 0,r=void 0,a=void 0,c=void 0;if(t=t.replace(/\s*$/,""),n=document.createElementNS(d,"tspan"),n.appendChild(document.createTextNode(t)),n.setAttribute("x",this._x),this._svgText.appendChild(n),c=this._svgText.getBBox().width,!(c<=e)){for(i=1,o=t.length-1,a=Math.floor((o-i)/2)+i,n.childNodes[0].textContent=t.substr(0,a),c=this._svgText.getBBox().width;o-i>1;)c===e?(i=a,o=a+1):c<e?i=a+1:o=a-1,a=Math.floor((o-i)/2)+i,n.childNodes[0].textContent=t.substr(0,a),c=this._svgText.getBBox().width;if(c>e&&i>1&&i--,r=i," "!==t[i])for(;" "!==t[i-1]&&i>1;)i--;1===i&&(i=r),n.childNodes[0].textContent=t.substr(0,i).replace(/\s*$/,""),this._addTspans(t.substr(i).trim())}},o.prototype._getCharacterHeight=function(){var t=void 0,e=void 0;return e=document.createElementNS(d,"tspan"),e.appendChild(document.createTextNode("X")),this._svgText.appendChild(e),t=this._svgText.getBBox().height,this._svgText.removeChild(e),t}},{"./App":2,"./Sizer":32,"./main":36}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.m3SampleXml=['<map version="1.0.1">',"<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->",'<attribute_registry SHOW_ATTRIBUTES="hide"/>','<node CREATED="1462043698948" ID="ID_965050671" MODIFIED="1462043907151" STYLE="bubble" TEXT="m3 - Mobile Mind Mapper">','<node CREATED="1462039594280" ID="ID_1135851275" MODIFIED="1470274598327" POSITION="right" STYLE="bubble" TEXT="Features">','<cloud COLOR="#99ffff"/>','<node CREATED="1462040509054" ID="ID_543752747" MODIFIED="1462043731226" STYLE="bubble" TEXT="Different Colors">','<node CREATED="1462039771431" ID="ID_1470849767" MODIFIED="1462043731226" STYLE="bubble" TEXT="Clouds">','<node CREATED="1462039784694" ID="ID_228968498" MODIFIED="1462043731226" STYLE="bubble" TEXT="Purple Animals">','<cloud COLOR="#ff00ff"/>','<node CREATED="1462039803815" ID="ID_602618405" MODIFIED="1462043731226" STYLE="bubble" TEXT="Cows"/>','<node CREATED="1462039805285" ID="ID_237124399" MODIFIED="1462043731226" STYLE="bubble" TEXT="Pigs"/>','<node CREATED="1462039806915" ID="ID_1661353133" MODIFIED="1462043731226" STYLE="bubble" TEXT="Chickens"/>',"</node>",'<node CREATED="1462039824903" ID="ID_876831829" MODIFIED="1462043731226" STYLE="bubble" TEXT="Yellow Rocks">','<cloud COLOR="#ffff99"/>','<node CREATED="1462039858713" ID="ID_1157739208" MODIFIED="1462043731226" STYLE="bubble" TEXT="Big"/>','<node CREATED="1462039860350" ID="ID_519651365" MODIFIED="1462043731226" STYLE="bubble" TEXT="Medium"/>','<node CREATED="1462039863328" ID="ID_1991617145" MODIFIED="1462043731226" STYLE="bubble" TEXT="Small"/>',"</node>","</node>",'<node CREATED="1462039600142" ID="ID_234362439" MODIFIED="1462043731226" STYLE="bubble" TEXT="Text">','<node COLOR="#ff0000" CREATED="1462039606556" ID="ID_1266657645" MODIFIED="1462043731226" STYLE="bubble" TEXT="Red">','<linktarget COLOR="#ff0000" DESTINATION="ID_1266657645" ENDARROW="Default" ENDINCLINATION="572;0;" ID="Arrow_ID_1904290717" SOURCE="ID_1771718963" STARTARROW="None" STARTINCLINATION="572;0;"/>',"</node>",'<node COLOR="#3333ff" CREATED="1462039607781" ID="ID_206596956" MODIFIED="1462043731226" STYLE="bubble" TEXT="Blue"/>','<node COLOR="#00cc33" CREATED="1462039609275" ID="ID_695741716" MODIFIED="1462043731226" STYLE="bubble" TEXT="Green"/>',"</node>",'<node CREATED="1462039616965" ID="ID_1588515364" MODIFIED="1462043731227" STYLE="bubble" TEXT="Backgrounds">','<node BACKGROUND_COLOR="#ff0000" CREATED="1462039622749" ID="ID_1760936862" MODIFIED="1462043731227" STYLE="bubble" TEXT="Red"/>','<node BACKGROUND_COLOR="#3333ff" CREATED="1462039624144" ID="ID_1678805805" MODIFIED="1462043731227" STYLE="bubble" TEXT="Blue">','<linktarget COLOR="#3333ff" DESTINATION="ID_1678805805" ENDARROW="Default" ENDINCLINATION="549;0;" ID="Arrow_ID_1495165921" SOURCE="ID_1771718963" STARTARROW="None" STARTINCLINATION="549;0;"/>',"</node>",'<node BACKGROUND_COLOR="#00cc00" CREATED="1462039626188" ID="ID_549643898" MODIFIED="1462043731227" STYLE="bubble" TEXT="Green"/>',"</node>","</node>",'<node CREATED="1462039882868" ID="ID_253584333" MODIFIED="1462043731227" STYLE="bubble" TEXT="Different formatting">','<node CREATED="1462039890257" ID="ID_968077355" MODIFIED="1462043731227" STYLE="bubble" TEXT="Bold">','<font BOLD="true" NAME="SansSerif" SIZE="12"/>',"</node>",'<node CREATED="1462039893215" ID="ID_356197729" MODIFIED="1462043731227" STYLE="bubble" TEXT="Italic">','<font ITALIC="true" NAME="SansSerif" SIZE="12"/>',"</node>",'<node CREATED="1462039895508" ID="ID_635764115" MODIFIED="1462043731227" STYLE="bubble" TEXT="Big">','<font NAME="SansSerif" SIZE="15"/>',"</node>",'<node CREATED="1462039897496" ID="ID_705340948" MODIFIED="1462043731227" STYLE="bubble" TEXT="Small">','<font NAME="SansSerif" SIZE="10"/>',"</node>",'<node CREATED="1462040612489" ID="ID_700562846" MODIFIED="1468754256661" STYLE="bubble" TEXT="Rich Text (html)">','<node CREATED="1462039899280" ID="ID_1985907620" MODIFIED="1462043731227" STYLE="bubble">','<richcontent TYPE="NODE"><html>',"  <head>","","  </head>","  <body>","    <p>","      Bullets","    </p>","    <ul>","      <li>","        Bullet 1","      </li>","      <li>","        Bullet 2","      </li>","    </ul>","    <p>",'      <font color="#ff3333">Red</font>, <font color="#0000ff">blue</font>, <font color="#00cc00">green</font>.',"    </p>","    <p>","      Tables:","    </p>","    <table>","      <tr>","        <td>","          1","        </td>","        <td>","          2","        </td>","      </tr>","      <tr>","        <td>","          3","        </td>","        <td>","          4","        </td>","      </tr>","    </table>","  </body>","</html></richcontent>","</node>",'<node CREATED="1468754257821" ID="ID_1986636695" MODIFIED="1469533105076">','<richcontent TYPE="NODE"><html>',"  <head>","","  </head>","  <body>","    <p>","      A really long node.","    </p>","    <p>","","    </p>","    <p>","      Ninja? You're a ninja? Get out of here, you're a ninja! Yes, I am a ninja. I read the rules before I broke 'em I broke the chains before they choked me out Now I pay close attention really learn the code I learned to read the map before I hit the road","    </p>","  </body>","</html></richcontent>","</node>",'<node CREATED="1469934418119" ID="ID_1967313735" MODIFIED="1469934423772" TEXT="Special case: one word richtext node">','<node CREATED="1469934426226" ID="ID_1652611240" MODIFIED="1469934454851">','<richcontent TYPE="NODE"><html>',"  <head>","    ","  </head>","  <body>","    <p>","      test","    </p>","  </body>","</html></richcontent>","</node>","</node>","</node>",'<node CREATED="1468754702243" ID="ID_1570168724" MODIFIED="1468754714646" TEXT="Really long non-rich text nodes">','<node CREATED="1468760777021" ID="ID_308262894" MODIFIED="1468760814561" TEXT="Really Big">','<font NAME="SansSerif" SIZE="20"/>','<node CREATED="1468754724438" ID="ID_375984957" MODIFIED="1469533154104" TEXT="A really long node.&#xa;&#xa;Ninja? You&apos;re a ninja? Get out of here, you&apos;re a ninja! Yes, I am a ninja. I read the rules before I broke &apos;em I broke the chains before they choked me out Now I pay close attention really learn the code I learned to read the map before I hit the road&#xa;&#xa;And a short line after a blank line.&#xa;Here&apos;s another line.">','<font NAME="SansSerif" SIZE="21"/>',"</node>","</node>",'<node CREATED="1468760841005" ID="ID_835550514" MODIFIED="1468760843115" TEXT="Normal size">','<node CREATED="1468760851979" ID="ID_52708837" MODIFIED="1469936866119" TEXT="Another really long node.&#xa;&#xa;Ninja? You&apos;re a ninja? Get out of here, you&apos;re a ninja! Yes, I am a ninja. I read the rules before I broke &apos;em I broke the chains before they choked me out Now I pay close attention really learn the code I learned to read the map before I hit the road&#xa;&#xa;And a short line after a blank line.&#xa;Here&apos;s another line."/>',"</node>","</node>","</node>",'<node CREATED="1462040209794" ID="ID_1450398116" MODIFIED="1462043731228" STYLE="bubble" TEXT="Graphical links to other nodes">','<node CREATED="1462040216844" ID="ID_1771718963" MODIFIED="1462043731228" STYLE="bubble" TEXT="This links to the red text node and the blue background node">','<arrowlink COLOR="#ff0000" DESTINATION="ID_1266657645" ENDARROW="Default" ENDINCLINATION="572;0;" ID="Arrow_ID_1904290717" STARTARROW="None" STARTINCLINATION="572;0;"/>','<arrowlink COLOR="#3333ff" DESTINATION="ID_1678805805" ENDARROW="Default" ENDINCLINATION="549;0;" ID="Arrow_ID_1495165921" STARTARROW="None" STARTINCLINATION="549;0;"/>',"</node>",'<node CREATED="1462040222313" ID="ID_1869202189" MODIFIED="1462043731228" STYLE="bubble" TEXT="This links to the node below">','<arrowlink COLOR="#cc00cc" DESTINATION="ID_80610701" ENDARROW="Default" ENDINCLINATION="24;0;" ID="Arrow_ID_1717134933" STARTARROW="None" STARTINCLINATION="24;0;"/>',"</node>",'<node CREATED="1462041692666" ID="ID_80610701" MODIFIED="1462043731228" STYLE="bubble" TEXT="This is a boring child node">','<linktarget COLOR="#cc00cc" DESTINATION="ID_80610701" ENDARROW="Default" ENDINCLINATION="24;0;" ID="Arrow_ID_1717134933" SOURCE="ID_1869202189" STARTARROW="None" STARTINCLINATION="24;0;"/>',"</node>",'<node CREATED="1462040233996" ID="ID_527744129" MODIFIED="1462043731228" STYLE="bubble" TEXT="This links to the other side.">','<arrowlink COLOR="#000000" DESTINATION="ID_269173357" ENDARROW="Default" ENDINCLINATION="1093;0;" ID="Arrow_ID_980643324" STARTARROW="None" STARTINCLINATION="1093;0;"/>',"</node>","</node>",'<node CREATED="1462041374253" ID="ID_1891273051" MODIFIED="1470260712736" STYLE="bubble" TEXT="Links">','<node CREATED="1462041421915" ID="ID_1913764655" LINK="http://GlenReesor.ca" MODIFIED="1462043731229" STYLE="bubble" TEXT="To external websites (http://GlenReesor.ca)"/>',"</node>",'<node CREATED="1473001706623" ID="ID_284570804" MODIFIED="1473001707763" TEXT="Icons">','<node CREATED="1470260753854" ID="ID_572705782" MODIFIED="1470260761493" TEXT="This node has multiple icons">','<icon BUILTIN="full-1"/>','<icon BUILTIN="full-2"/>',"</node>",'<node CREATED="1470273954850" ID="ID_1601662317" MODIFIED="1470273981369" TEXT="These nodes show all the Freemind / Freeplane builtin icons">','<node CREATED="1470274559574" FOLDED="true" ID="ID_668463232" MODIFIED="1473001726633" TEXT="Group 1">','<node CREATED="1470273985949" ID="ID_1683765005" MODIFIED="1470276740172" TEXT="Idea">','<icon BUILTIN="idea"/>',"</node>",'<node CREATED="1470273992576" ID="ID_1653988593" MODIFIED="1470276743806" TEXT="Question">','<icon BUILTIN="help"/>',"</node>",'<node CREATED="1470274023079" ID="ID_1973136326" MODIFIED="1470276767375" TEXT="Important 1">','<icon BUILTIN="yes"/>',"</node>",'<node CREATED="1470276768290" ID="ID_537458964" MODIFIED="1470276773665" TEXT="Important 2">','<icon BUILTIN="messagebox_warning"/>',"</node>",'<node CREATED="1470274030662" ID="ID_187644575" MODIFIED="1470276777433" TEXT="Stop">','<icon BUILTIN="stop-sign"/>',"</node>",'<node CREATED="1470274042971" ID="ID_1017890612" MODIFIED="1470276780936" TEXT="No Entry">','<icon BUILTIN="closed"/>',"</node>",'<node CREATED="1470274053628" ID="ID_1483103017" MODIFIED="1470276784182" TEXT="Info">','<icon BUILTIN="info"/>',"</node>",'<node CREATED="1470274078444" ID="ID_13358781" MODIFIED="1470276792667" TEXT="OK">','<icon BUILTIN="button_ok"/>',"</node>",'<node CREATED="1470274090651" ID="ID_761210473" MODIFIED="1470276795877" TEXT="Not OK">','<icon BUILTIN="button_cancel"/>',"</node>",'<node CREATED="1470274102733" ID="ID_599523701" MODIFIED="1470276799244" TEXT="Priority 1">','<icon BUILTIN="full-1"/>',"</node>",'<node CREATED="1470274105237" ID="ID_892391816" MODIFIED="1470276802697" TEXT="Priority 2">','<icon BUILTIN="full-2"/>',"</node>",'<node CREATED="1470274107179" ID="ID_981611964" MODIFIED="1470276813307" TEXT="Priority 3">','<icon BUILTIN="full-3"/>',"</node>",'<node CREATED="1470274108911" ID="ID_496039830" MODIFIED="1470276817114" TEXT="Priority 4">','<icon BUILTIN="full-4"/>',"</node>",'<node CREATED="1470274110815" ID="ID_832423001" MODIFIED="1470276821256" TEXT="Priority 5">','<icon BUILTIN="full-5"/>',"</node>",'<node CREATED="1470274113241" ID="ID_792124145" MODIFIED="1470276824332" TEXT="Priority 6">','<icon BUILTIN="full-6"/>',"</node>",'<node CREATED="1470274115931" ID="ID_1391931812" MODIFIED="1470276827613" TEXT="Priority 7">','<icon BUILTIN="full-7"/>',"</node>",'<node CREATED="1470274119703" ID="ID_144513057" MODIFIED="1470276835355" TEXT="Priority 8">','<icon BUILTIN="full-8"/>',"</node>",'<node CREATED="1470274121765" ID="ID_1645124097" MODIFIED="1470276838771" TEXT="Priority 9">','<icon BUILTIN="full-9"/>',"</node>",'<node CREATED="1470274124300" ID="ID_1763612700" MODIFIED="1470276841883" TEXT="Priority 0">','<icon BUILTIN="full-0"/>',"</node>","</node>",'<node CREATED="1470274608271" FOLDED="true" ID="ID_582923239" MODIFIED="1470276897308" TEXT="Group 2">','<node CREATED="1470274147677" ID="ID_956666502" MODIFIED="1470276848415" TEXT="Red Traffic Light">','<icon BUILTIN="stop"/>',"</node>",'<node CREATED="1470274150920" ID="ID_1420477201" MODIFIED="1470276851963" TEXT="Yellow Traffic Light">','<icon BUILTIN="prepare"/>',"</node>",'<node CREATED="1470274155218" ID="ID_1735979867" MODIFIED="1470276856085" TEXT="Green Traffic Light">','<icon BUILTIN="go"/>',"</node>",'<node CREATED="1470274167775" ID="ID_3681512" MODIFIED="1470276859201" TEXT="Back">','<icon BUILTIN="back"/>',"</node>",'<node CREATED="1470274168880" ID="ID_624074490" MODIFIED="1470276862916" TEXT="Forward">','<icon BUILTIN="forward"/>',"</node>",'<node CREATED="1470274170733" ID="ID_315111875" MODIFIED="1470276866647" TEXT="Up">','<icon BUILTIN="up"/>',"</node>",'<node CREATED="1470274171728" ID="ID_205686789" MODIFIED="1470276870355" TEXT="Down">','<icon BUILTIN="down"/>',"</node>",'<node CREATED="1470274180091" ID="ID_1019269892" MODIFIED="1470276873977" TEXT="Look here">','<icon BUILTIN="attach"/>',"</node>",'<node CREATED="1470274194228" ID="ID_307402528" MODIFIED="1470276877527" TEXT="I am happy">','<icon BUILTIN="ksmiletris"/>',"</node>",'<node CREATED="1470274196889" ID="ID_1307032671" MODIFIED="1470276880640" TEXT="No Mind">','<icon BUILTIN="smiley-neutral"/>',"</node>",'<node CREATED="1470274210422" ID="ID_739849392" MODIFIED="1470276883984" TEXT="Surprising">','<icon BUILTIN="smiley-oh"/>',"</node>",'<node CREATED="1470274221182" ID="ID_588227889" MODIFIED="1470276890781" TEXT="Angry">','<icon BUILTIN="smiley-angry"/>',"</node>",'<node CREATED="1470274224458" ID="ID_1534482285" MODIFIED="1470276895008" TEXT="I&apos;m not amused">','<icon BUILTIN="smily_bad"/>',"</node>","</node>",'<node CREATED="1470274624591" FOLDED="true" ID="ID_748072325" MODIFIED="1470276973751" TEXT="Group 3">','<node CREATED="1470274233231" ID="ID_1191599385" MODIFIED="1470276901745" TEXT="Dangerous">','<icon BUILTIN="clanbomber"/>',"</node>",'<node CREATED="1470274238846" ID="ID_1365733790" MODIFIED="1470276905596" TEXT="Do not forget">','<icon BUILTIN="desktop_new"/>',"</node>",'<node CREATED="1470274245360" ID="ID_1671495105" MODIFIED="1470276911211" TEXT="Home">','<icon BUILTIN="gohome"/>',"</node>",'<node CREATED="1470274267522" ID="ID_1589688448" MODIFIED="1470276915427" TEXT="Folder">','<icon BUILTIN="folder"/>',"</node>",'<node CREATED="1470274273537" ID="ID_727976504" MODIFIED="1470276920477" TEXT="Mailbox">','<icon BUILTIN="korn"/>',"</node>",'<node CREATED="1470274278659" ID="ID_1694584818" MODIFIED="1470276932090" TEXT="Mail">','<icon BUILTIN="Mail"/>',"</node>",'<node CREATED="1470274285964" ID="ID_467765651" MODIFIED="1470276936379" TEXT="Email">','<icon BUILTIN="kmail"/>',"</node>",'<node CREATED="1470274292398" ID="ID_975920144" MODIFIED="1470276941960" TEXT="List">','<icon BUILTIN="list"/>',"</node>",'<node CREATED="1470274302438" ID="ID_1286895171" MODIFIED="1470276947728" TEXT="Refine">','<icon BUILTIN="edit"/>',"</node>",'<node CREATED="1470274311659" ID="ID_1291926377" MODIFIED="1470276951592" TEXT="Phone">','<icon BUILTIN="kaddressbook"/>',"</node>",'<node CREATED="1470274326774" ID="ID_860951320" MODIFIED="1470276955045" TEXT="Music">','<icon BUILTIN="knotify"/>',"</node>",'<node CREATED="1470274332891" ID="ID_1795589734" MODIFIED="1470276958327" TEXT="Key">','<icon BUILTIN="password"/>',"</node>",'<node CREATED="1470274344524" ID="ID_34588906" MODIFIED="1470276971748" TEXT="To be refined">','<icon BUILTIN="pencil"/>',"</node>","</node>",'<node CREATED="1470274638580" FOLDED="true" ID="ID_1874826012" MODIFIED="1470277041855" TEXT="Group 4">','<node CREATED="1470274353376" ID="ID_296801429" MODIFIED="1470276982180" TEXT="Magic">','<icon BUILTIN="wizard"/>',"</node>",'<node CREATED="1470274354931" ID="ID_1275105670" MODIFIED="1470276992469" TEXT="To be discussed">','<icon BUILTIN="xmag"/>',"</node>",'<node CREATED="1470274366007" ID="ID_328964528" MODIFIED="1470277004173" TEXT="Remember">','<icon BUILTIN="bell"/>',"</node>",'<node CREATED="1470274368445" ID="ID_309673775" MODIFIED="1470277009855" TEXT="Excellent">','<icon BUILTIN="bookmark"/>',"</node>",'<node CREATED="1470274379311" ID="ID_1897787974" MODIFIED="1470277012969" TEXT="Linux">','<icon BUILTIN="penguin"/>',"</node>",'<node CREATED="1470274387083" ID="ID_983157650" MODIFIED="1470277017307" TEXT="Nice">','<icon BUILTIN="licq"/>',"</node>",'<node CREATED="1470274391915" ID="ID_1108900660" MODIFIED="1470277020239" TEXT="FreeMind">','<icon BUILTIN="freemind_butterfly"/>',"</node>",'<node CREATED="1470274400735" ID="ID_168308138" MODIFIED="1470277023788" TEXT="Broken">','<icon BUILTIN="broken-line"/>',"</node>",'<node CREATED="1470274410906" ID="ID_1113265925" MODIFIED="1470277027688" TEXT="Date">','<icon BUILTIN="calendar"/>',"</node>",'<node CREATED="1470274411797" ID="ID_1111239625" MODIFIED="1470277032229" TEXT="Time">','<icon BUILTIN="clock"/>',"</node>",'<node CREATED="1470274465359" ID="ID_592894369" MODIFIED="1470277036217" TEXT="Waiting">','<icon BUILTIN="hourglass"/>',"</node>",'<node CREATED="1470274467085" ID="ID_1370398070" MODIFIED="1470277040084" TEXT="Launch">','<icon BUILTIN="launch"/>',"</node>","</node>",'<node CREATED="1470274649253" FOLDED="true" ID="ID_531121682" MODIFIED="1470277093600" TEXT="Group 5">','<node CREATED="1470274472252" ID="ID_414874810" MODIFIED="1470277045730" TEXT="Black Flag">','<icon BUILTIN="flag-black"/>',"</node>",'<node CREATED="1470274484319" ID="ID_1449934992" MODIFIED="1470277049326" TEXT="Blue Flag">','<icon BUILTIN="flag-blue"/>',"</node>",'<node CREATED="1470274489820" ID="ID_155731585" MODIFIED="1470277053142" TEXT="Green Flag">','<icon BUILTIN="flag-green"/>',"</node>",'<node CREATED="1470274495129" ID="ID_1527549372" MODIFIED="1470277055940" TEXT="Orange Flag">','<icon BUILTIN="flag-orange"/>',"</node>",'<node CREATED="1470274501951" ID="ID_1373829229" MODIFIED="1470277059198" TEXT="Pink Flag">','<icon BUILTIN="flag-pink"/>',"</node>",'<node CREATED="1470274506959" ID="ID_292618678" MODIFIED="1470277062906" TEXT="Yellow Flag">','<icon BUILTIN="flag-yellow"/>',"</node>",'<node CREATED="1470274513363" ID="ID_1395471563" MODIFIED="1470277067586" TEXT="Family">','<icon BUILTIN="family"/>',"</node>",'<node CREATED="1470274519190" ID="ID_859669466" MODIFIED="1470277070770" TEXT="Female1">','<icon BUILTIN="female1"/>',"</node>",'<node CREATED="1470274524607" ID="ID_420485161" MODIFIED="1470277074549" TEXT="Female2">','<icon BUILTIN="female2"/>',"</node>",'<node CREATED="1470274529743" ID="ID_970036659" MODIFIED="1470277079383" TEXT="Male1">','<icon BUILTIN="male1"/>',"</node>",'<node CREATED="1470274534818" ID="ID_1623985814" MODIFIED="1470277083525" TEXT="Male2">','<icon BUILTIN="male2"/>',"</node>",'<node CREATED="1470274541397" ID="ID_1792980015" MODIFIED="1470277087073" TEXT="Females">','<icon BUILTIN="fema"/>',"</node>",'<node CREATED="1470274543150" ID="ID_440597757" MODIFIED="1470277091521" TEXT="Group">','<icon BUILTIN="group"/>',"</node>","</node>",'<node CREATED="1470782717713" FOLDED="true" ID="ID_98980111" MODIFIED="1470785628121" TEXT="Freeplane Only">','<node CREATED="1470782909748" FOLDED="true" ID="ID_647784643" MODIFIED="1470785577813" TEXT="Group 1">','<node CREATED="1470782723393" ID="ID_144981814" MODIFIED="1470785527138" TEXT=" Checked">','<icon BUILTIN="checked"/>',"</node>",'<node CREATED="1470782740632" ID="ID_230429347" MODIFIED="1470785533530" TEXT="Unchecked">','<icon BUILTIN="unchecked"/>',"</node>",'<node CREATED="1470782745648" ID="ID_283962017" MODIFIED="1470785538497" TEXT="Very Negative">','<icon BUILTIN="very_negative"/>',"</node>",'<node CREATED="1470782751460" ID="ID_357044565" MODIFIED="1470785542311" TEXT="Negative">','<icon BUILTIN="negative"/>',"</node>",'<node CREATED="1470782756181" ID="ID_1927982531" MODIFIED="1470785545768" TEXT="Positive">','<icon BUILTIN="positive"/>',"</node>",'<node CREATED="1470782761489" ID="ID_1266905311" MODIFIED="1470785551207" TEXT="Very Positive">','<icon BUILTIN="very_positive"/>',"</node>",'<node CREATED="1470782766664" ID="ID_1280504173" MODIFIED="1470785553952" TEXT="0%">','<icon BUILTIN="0%"/>',"</node>",'<node CREATED="1470782771351" ID="ID_1511742791" MODIFIED="1470785556750" TEXT="25%">','<icon BUILTIN="25%"/>',"</node>",'<node CREATED="1470782789124" ID="ID_789171747" MODIFIED="1470785559445" TEXT="50%">','<icon BUILTIN="50%"/>',"</node>",'<node CREATED="1470782797378" ID="ID_128192868" MODIFIED="1470785561767" TEXT="75%">','<icon BUILTIN="75%"/>',"</node>",'<node CREATED="1470782802902" ID="ID_750490425" MODIFIED="1470785564554" TEXT="100%">','<icon BUILTIN="100%"/>',"</node>",'<node CREATED="1470782807624" ID="ID_977396693" MODIFIED="1470785568817" TEXT="Revision">','<icon BUILTIN="revision"/>',"</node>",'<node CREATED="1470782816813" ID="ID_1072450545" MODIFIED="1470785572134" TEXT="Video">','<icon BUILTIN="video"/>',"</node>",'<node CREATED="1470782822209" ID="ID_1537874305" MODIFIED="1470785575406" TEXT="Audio">','<icon BUILTIN="audio"/>',"</node>","</node>",'<node CREATED="1470782911563" FOLDED="true" ID="ID_857740039" MODIFIED="1470785625728" TEXT="Group 2">','<node CREATED="1470782827803" ID="ID_1016790807" MODIFIED="1470785585777" TEXT="Executable">','<icon BUILTIN="executable"/>',"</node>",'<node CREATED="1470782832460" ID="ID_26688633" MODIFIED="1470785589152" TEXT="Image">','<icon BUILTIN="image"/>',"</node>",'<node CREATED="1470782837595" ID="ID_1439710736" MODIFIED="1470785592894" TEXT="Internet">','<icon BUILTIN="internet"/>',"</node>",'<node CREATED="1470782842325" ID="ID_1060693777" MODIFIED="1470785597702" TEXT="Internet warning">','<icon BUILTIN="internet_warning"/>',"</node>",'<node CREATED="1470782848010" ID="ID_406699905" MODIFIED="1470785601203" TEXT="Mind Map">','<icon BUILTIN="mindmap"/>',"</node>",'<node CREATED="1470782855688" ID="ID_475247795" MODIFIED="1470785604874" TEXT="Narrative">','<icon BUILTIN="narrative"/>',"</node>",'<node CREATED="1470782860622" ID="ID_1023015401" MODIFIED="1470785607417" TEXT="Freeplane">','<icon BUILTIN="bee"/>',"</node>",'<node CREATED="1470782866886" ID="ID_1762232749" MODIFIED="1470785610697" TEXT="Addition">','<icon BUILTIN="addition"/>',"</node>",'<node CREATED="1470782871992" ID="ID_272870218" MODIFIED="1470785614507" TEXT="Subtraction">','<icon BUILTIN="subtraction"/>',"</node>",'<node CREATED="1470782876574" ID="ID_10259998" MODIFIED="1470785618862" TEXT="Multiplication">','<icon BUILTIN="multiplication"/>',"</node>",'<node CREATED="1470782881875" ID="ID_153253704" MODIFIED="1470785622421" TEXT="Division">','<icon BUILTIN="division"/>',"</node>","</node>","</node>",'<node CREATED="1470783526913" ID="ID_191527156" MODIFIED="1470783534186" TEXT="m3">','<icon BUILTIN="m3"/>',"</node>","</node>","</node>",'<node CREATED="1462040666765" ID="ID_213651658" MODIFIED="1462043731228" STYLE="bubble" TEXT="Load and save maps in your browser"/>','<node CREATED="1462040672436" ID="ID_1187470067" MODIFIED="1462043731228" STYLE="bubble" TEXT="Import/Export from/to text files, in Freemind/Freeplane format"/>',"</node>",'<node CREATED="1462040721011" ID="ID_1088397126" MODIFIED="1462043731228" POSITION="right" STYLE="bubble" TEXT="Other Freemind Features (not yet supported)">','<cloud COLOR="#66ffcc"/>','<node CREATED="1462040732819" ID="ID_1759561712" MODIFIED="1462043731228" STYLE="bubble" TEXT="Node formatting">','<node CREATED="1462040848317" ID="ID_528831839" MODIFIED="1462043736736" STYLE="fork" TEXT="Forks"/>','<node CREATED="1462040850220" ID="ID_1795119427" MODIFIED="1462043731229" STYLE="bubble" TEXT="Bubbles"/>',"</node>",'<node CREATED="1462041374253" ID="ID_712536007" MODIFIED="1462043731229" STYLE="bubble" TEXT="Links">','<node CREATED="1462041377019" ID="ID_181285237" LINK="#ID_237124399" MODIFIED="1462043731229" STYLE="bubble" TEXT="To nodes within the same map (Pigs in this case)"/>',"</node>",'<node CREATED="1462041459526" ID="ID_212229780" MODIFIED="1462043731230" STYLE="bubble" TEXT="Edge Formatting">','<node CREATED="1462041463744" ID="ID_377098184" MODIFIED="1462043731185" STYLE="bubble" TEXT="Linear">','<edge STYLE="linear"/>',"</node>",'<node CREATED="1462041468021" ID="ID_1583676433" MODIFIED="1462043731230" STYLE="bubble" TEXT="Red">','<edge COLOR="#ff0000"/>',"</node>",'<node CREATED="1462041474448" ID="ID_1262239804" MODIFIED="1462043731230" STYLE="bubble" TEXT="Thick">','<edge WIDTH="8"/>',"</node>","</node>",'<node CREATED="1462041512539" ID="ID_1407758860" MODIFIED="1462043731230" STYLE="bubble" TEXT="Attributes and Notes">','<node CREATED="1462041516564" ID="ID_1142622762" MODIFIED="1462044372931" STYLE="bubble" TEXT="This has an attribute">','<attribute NAME="Attribute1" VALUE="Value1"/>',"</node>",'<node CREATED="1462041521755" ID="ID_1835471477" MODIFIED="1462043731230" STYLE="bubble" TEXT="This has a note">','<richcontent TYPE="NOTE"><html>',"  <head>","","  </head>","  <body>","    <p>","      Here is a beautiful note","    </p>","    <p>",'      It uses <b><font color="#ff0000">rich</font></b>&#160;formatting',"    </p>","  </body>","</html></richcontent>","</node>","</node>",'<node CREATED="1462041754498" ID="ID_208132770" MODIFIED="1462043731230" STYLE="bubble" TEXT="User Interface">','<node CREATED="1462041769405" ID="ID_1909791806" MODIFIED="1462043731230" STYLE="bubble" TEXT="Undo / Redo"/>','<node CREATED="1462041773883" ID="ID_726015204" MODIFIED="1462043731230" STYLE="bubble" TEXT="Cut / Paste"/>','<node CREATED="1462041776386" ID="ID_1038038367" MODIFIED="1462043731230" STYLE="bubble" TEXT="Moving child nodes up and down"/>',"</node>","</node>",'<node CREATED="1462040192545" ID="ID_661377408" MODIFIED="1462040201008" POSITION="left" TEXT="Nodes on both sides of the root">','<node CREATED="1462040240344" ID="ID_269173357" MODIFIED="1462040367916" TEXT="Child Node">','<linktarget COLOR="#000000" DESTINATION="ID_269173357" ENDARROW="Default" ENDINCLINATION="1093;0;" ID="Arrow_ID_980643324" SOURCE="ID_527744129" STARTARROW="None" STARTINCLINATION="1093;0;"/>',"</node>","</node>","</node>","</map>"];
},{}],36:[function(t,e,i){"use strict";function o(){n(),i.m3App=s=new r.App,s.run()}function n(){var t=void 0,e=void 0,i=void 0,o="<div id='"+r.App.HTML_ID_PREFIX+"-app'>"+("   <div id='"+r.App.HTML_ID_PREFIX+"-left' style='float: left;'> ")+("      <div id='"+r.App.HTML_ID_PREFIX+"-top'> ")+("         <span id='"+r.App.HTML_ID_PREFIX+"-mapName'></span>")+"         <img "+("            id='"+r.App.HTML_ID_PREFIX+"-modified' ")+"            style='margin-bottom: 3px;'             height='5px' "+("            src='"+r.App.m3Path+"/images/modified.svg'")+"         />      </div>"+("      <div id='"+r.App.HTML_ID_PREFIX+"-popups' hidden>")+"      </div>      <div "+("         id='"+r.App.HTML_ID_PREFIX+"-html-sizing' ")+"         style='word-wrap:break-word;'      >      </div>"+("      <div id='"+r.App.HTML_ID_PREFIX+"-drawing-area'>")+"         <svg             xmlns='http://www.w3.org/2000/svg' "+("            id='"+r.App.HTML_ID_PREFIX+"-svg-element'")+"         >            <defs>"+("               <marker id='"+r.App.HTML_ID_PREFIX+"-triangle'")+"                       viewBox='0 0 10 10'                       refX='1' refY='5'                       markerWidth='12'                       markerHeight='12'                       orient='auto'>                   <path d='M 0 0 L 10 5 L 0 10 z' />              </marker>            </defs>"+("            <g id='"+r.App.HTML_ID_PREFIX+"-svg-g-element'>")+("               <g id='"+r.App.HTML_ID_PREFIX+"-svgCloudLayer'> </g>")+("               <g id='"+r.App.HTML_ID_PREFIX+"-svgLinksLayer'> </g>")+("               <g id='"+r.App.HTML_ID_PREFIX+"-svgBubbleLayer'> </g>")+("               <g id='"+r.App.HTML_ID_PREFIX+"-svgTextLayer'> </g>")+"            </g>         </svg>      </div>   </div>"+("   <div id='"+r.App.HTML_ID_PREFIX+"-right' style='float: right;'> ")+"   </div></div>";i=new DOMParser,e=i.parseFromString(o,"text/html"),t=document.importNode(e.getElementById(r.App.HTML_ID_PREFIX+"-app"),!0),document.getElementById(r.App.HTML_ID_PREFIX+"-container").appendChild(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.m3App=void 0,i.main=o;var r=t("./App"),s=i.m3App=void 0},{"./App":2}],37:[function(t,e,i){"use strict";var o=t("./App"),n=t("./main");o.App.setM3Path(),document.addEventListener("DOMContentLoaded",n.main)},{"./App":2,"./main":36}],38:[function(t,e,i){"use strict";function o(t,e,i,o,n,s){var l=void 0,d=void 0;return d=[],l=r(e,i,o),d.push("<"+t+" "+l+">"),"map"===t&&s.length>0?(s.forEach(function(t){d.push(t)}),n.forEach(function(t){d=d.concat(t.getAsXml())})):(n.forEach(function(t){d=d.concat(t.getAsXml())}),s.forEach(function(t){d.push(t)})),d.push("</"+t+">"),d}function n(t,e,i){var o=void 0,n=void 0,r=void 0,a=void 0,c=s(t.tagName,t.attributes,e),p=d(c,2);o=p[0],r=p[1];var h=l(t.tagName,t.childNodes,i),u=d(h,2);return n=u[0],a=u[1],[o,r,n,a]}function r(t,e,i){var o="",n=!0;return e.forEach(function(e,i){e!==t.get(i)&&(n?(o=i+'="'+e+'"',n=!1):o+=" "+i+'="'+e+'"')}),i.forEach(function(t,e){n?(o=e+'="'+t+'"',n=!1):o+=" "+e+'="'+t+'"'}),o}function s(t,e,i){var o=void 0,n=void 0,r=void 0,s=void 0,l=void 0;for(r=new Map,l=new Map,i.forEach(function(t,e){r.set(e,t)}),s=e.length,n=0;n<s;n++)o=e[n],r.has(o.name)?r.set(o.name,o.value):(l.set(o.name,o.value),c.m3App.getDiagnostics().warn(a.Diagnostics.TASK_IMPORT_XML,"<"+t+">: Unexpected attribute: "+(o.name+'="'+o.value+'"')));return[r,l]}function l(t,e,i){var o=void 0,n=void 0,r=void 0,s=void 0,l=void 0,d=void 0,p=void 0;for(n=[],d=[],l=new XMLSerializer,r=e.length,o=0;o<r;o++)p=e[o],1===p.nodeType&&(i.indexOf(p.tagName)>=0?n.push(p):(s=l.serializeToString(p),d.push(s),c.m3App.getDiagnostics().warn(a.Diagnostics.TASK_IMPORT_XML,"<"+t+">: Unexpected embedded tag: "+s)));return[n,d]}Object.defineProperty(i,"__esModule",{value:!0});var d=function(){function t(t,e){var i=[],o=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.createXml=o,i.loadXml=n;var a=t("./Diagnostics"),c=t("./main")},{"./Diagnostics":10,"./main":36}]},{},[36,37]);
//# sourceMappingURL=m3.js.map
